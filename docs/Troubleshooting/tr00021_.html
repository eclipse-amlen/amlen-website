<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="There are several reasons why you might experience problems and unexpected behavior when you dynamically update your messaging policies."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Dynamic policy update problems</title></head><body id="tr00021_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a><ul><li><a href="../Troubleshooting/tr00000_.html">Log files</a></li><li><a href="../Troubleshooting/tr00006_.html">Maintenance mode</a></li><li><a href="../Troubleshooting/tr00001_.html">Common problems</a><ul><li><a href="../Troubleshooting/tr00002_.html">The application fails to connect</a></li><li><a href="../Troubleshooting/tr00008_.html">The application disconnects</a></li><li><a href="../Troubleshooting/tr00010_.html">The application fails to publish</a></li><li><a href="../Troubleshooting/tr00009_.html">The application fails to subscribe</a></li><li><a href="../Troubleshooting/tr00003_.html">Messages are not sent</a></li><li><a href="../Troubleshooting/tr00004_.html">Messages do not arrive</a></li><li><a href="../Troubleshooting/tr00005_.html">  MQ Connectivity problems</a></li><li><a href="../Troubleshooting/raisnotworking.html">Eclipse Amlen resource adapter is not working</a></li><li><a href="../Troubleshooting/tr00020_.html">LTPA validation fails</a></li><li><a href="../Troubleshooting/tr00012_.html">The Amlen WebUI is not working</a></li><li><a href="../Troubleshooting/tr00015_.html">High availability problems</a></li><li><a href="../Troubleshooting/tr00026_.html">Cluster problems</a></li><li class="active"><a href="../Troubleshooting/tr00021_.html">Dynamic policy update problems</a></li><li><a href="../Troubleshooting/tr00023_.html">SNMP problems</a></li><li><a href="../Troubleshooting/tr00024_.html">LDAP is not working</a></li><li><a href="../Troubleshooting/tr00031_.html">Problems during upgrade from IBM MessageSight version 1.2</a></li></ul></li><li><a href="../Troubleshooting/tr00030.html">Platform must-gather</a></li><li><a href="../Troubleshooting/admin_messagecatalog.html">Message catalog</a></li></ul></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Dynamic policy update problems</h1>

<div class="body conbody"><p class="shortdesc">There are several reasons why you might experience problems
and unexpected behavior when you dynamically update your messaging
policies.</p>
<section class="section"><h2 class="title sectiontitle">Are your subscriptions not being dynamically updated
when you update your messaging policy?</h2><p class="p"> If you are using global-shared durable subscriptions, see <a class="xref" href="tr00021_.html#tr00021___globalsharedsubs">Are your global-shared durable subscriptions not being dynamically updated when you update your subscription policy?</a>. If your subscriptions are not being dynamically updated, you must ensure that you are updating the topic policy that is associated with the subscription. </p><p class="p">You can use the REST API GET method with the URI <code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/monitor/Subscription</code> or the <span class="ph uicontrol">Monitoring</span> page in the <span class="ph">Amlen WebUI</span> to determine the topic policy that is associated with the subscription. If the topic policy that is associated with the subscription is not one that you expect, see <a class="xref" href="../Administering/ad00360_.html#ad00360___dynamicpolicy">Dynamic updates to messaging policies</a> for possible reasons why.</p></section>
<section class="section" id="tr00021___globalsharedsubs"><h2 class="title sectiontitle">Are your global-shared durable subscriptions not being dynamically updated when you update your subscription policy?</h2><p class="p"> If your subscriptions are not being dynamically updated, you must ensure that you are updating the subscription policy that is associated with the subscription. </p><p class="p">You can use the REST API GET method with the URI <code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/monitor/Subscription</code> or the <span class="ph uicontrol">Monitoring</span> page in the <span class="ph">Amlen WebUI</span> to determine the subscription policy that is associated with the subscription. If the subscription policy that is associated with the subscription is not one that you expect, see <a class="xref" href="../Administering/ad00360_.html#ad00360___dynamicpolicy">Dynamic updates to messaging policies</a> for possible reasons why.</p></section>
<section class="section"><h2 class="title sectiontitle">Does your subscription sometimes have different values
for <span class="keyword parmname">Max Messages</span>, <span class="keyword parmname">Max Messages Behavior</span>,
and <span class="keyword parmname">Disconnected client notification</span>?</h2><p class="p">Your
application might be using different messaging policies at different
times when it is connecting. See <a class="xref" href="../Administering/ad00360_.html#ad00360___dynamicpolicy">Dynamic updates to messaging policies</a> for possible reasons why.</p></section>
<section class="section"><h2 class="title sectiontitle">Does your application sometimes receive a disconnected
client notification, and sometimes not?</h2><p class="p">Your application
might be using different messaging policies at different times when
it is connecting. See <a class="xref" href="../Administering/ad00360_.html#ad00360___dynamicpolicy">Dynamic updates to messaging policies</a> for possible reasons why.</p></section>
<section class="section"><h2 class="title sectiontitle">Have you set or updated <span class="keyword parmname">MaxMessageTimeToLive</span> on
your messaging policy but messages are not expiring as you expect
them to? </h2><div class="p">If your messages are expiring too quickly, or
too slowly, or are not expiring at all, consider the following information:<ul class="ul">
<li class="li"><span class="keyword parmname">MaxMessageTimeToLive</span> must be set on the topic policy that is in use by the producer or publisher when it connected.</li>
<li class="li"><span class="keyword parmname">MaxMessageTimeToLive</span> is specified in seconds.
Verify that the value that is specified for <span class="keyword parmname">MaxMessageTimeToLive</span> is
correct.</li>
<li class="li">The <span class="keyword parmname">MaxMessageTimeToLive</span> value for a message is the value that is specified in the topic policy when the message is sent. If there are already messages in the subscription when you set or updated the value of <span class="keyword parmname">MaxMessageTimeToLive</span>, these messages might have might have different values than the value currently shown on the topic policy.</li>
<li class="li">In JMS, does your producer application specify a value for <code class="ph codeph">time-to-live</code> that is different from the value of <span class="keyword parmname">MaxMessageTimeToLive</span> on the topic policy? In this situation, the lower of the two values is used.</li>
</ul></div></section>
<section class="section"><h2 class="title sectiontitle"><span class="keyword parmname">MaxMessageTimeToLive</span> varies on
different connections of your publisher</h2><p class="p">Are you connecting
and using different messaging policies? For more information, see <a class="xref" href="../Administering/ad00360_.html#ad00360___dynamicpolicy">Dynamic updates to messaging policies</a>.</p></section>
<section class="section"><h2 class="title sectiontitle">Your consumer is receiving messages after their expiration
time</h2><p class="p">Check the value of the application <code class="ph codeph">time-to-live</code> parameter and the value of <span class="keyword parmname">MaxMessageTimeToLive</span> on the topic policy. The lower of the two values is used.</p><div class="p">Although <span class="ph">Eclipse Amlen</span> checks
message expiry time, messages can still be delivered to the application
after the expiry time:<ul class="ul">
<li class="li">Messages might expire while they are cached on the client of your JMS consumer.</li>
<li class="li">In JMS, messages might expire while they are in the client message
cache of your JMS consumer. By setting <span class="keyword parmname">clientMessageCache</span> on
your JMS receiver and immediately processing messages that are received,
you can ensure that fewer expired messages are delivered.</li>
</ul></div></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Troubleshooting/tr00001_.html" title="There are a number of common problems that you might encounter. Your application might fail to connect. Your application might disconnect unexpectedly. Your messages might not be published, or your messages might not arrive. MQ Connectivity might not work.">Common problems</a></div></div><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="tr00010_.html" title="There are several common reasons why an application might fail to publish to a topic.">The application fails to publish</a></li><li class="linklist"><a class="link" href="tr00009_.html" title="There are several common reasons why an application might fail to subscribe to a topic.">The application fails to subscribe</a></li><li class="linklist"><a class="link" href="tr00003_.html" title="There are several common reasons why messages might not be sent.">Messages are not sent</a></li><li class="linklist"><a class="link" href="tr00004_.html" title="There are several common reasons why messages might not arrive.">Messages do not arrive</a></li></ul></div></nav>
</article></main></body></html>