<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="To prevent the action that is specified in the Max Messages Behavior attribute from causing a problem, ensure that there is sufficient memory available in your system and that you specify a value in the Max Messagesattribute such that the Max Messages Behavior is never implemented."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Clustering: Max Messages Behavior</title></head><body id="clusteringmsgpolicyconsiderations"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a><ul><li><a href="../Planning/pl00030.html">Installation planning</a></li><li><a href="../Planning/ov00101_.html">Messaging patterns</a></li><li><a href="../Planning/pl00010.html">Messaging planning</a></li><li><a href="../Planning/clusteringconsiderations.html">Clustering considerations</a><ul><li><a href="../Planning/clusteringsubscriptionvis.html">Clustering: In a request-response model</a></li><li><a href="../Planning/clusteringretainedmsgs.html">Clustering: Retained messages</a></li><li><a href="../Planning/clusteringtimeserversynch.html">Clustering: Time server synchronization</a></li><li><a href="../Planning/clusteringmsgsbetweenservers.html">Clustering: Sending messages between cluster servers</a></li><li><a href="../Planning/clusteringmessageorder.html">Clustering: Message ordering</a></li><li class="active"><a href="../Planning/clusteringmsgpolicyconsiderations.html">Clustering: Max Messages Behavior</a></li><li><a href="../Planning/clusteringclientstate.html">Clustering: Client state</a></li><li><a href="../Planning/clusteringomping.html">Clustering: Testing multicast connectivity between servers in a cluster</a></li></ul></li><li><a href="../Planning/pl00002_.html">Capacity planning</a></li><li><a href="../Planning/pl00004.html">Performance planning</a></li><li><a href="../Planning/ov40001.html">High availability planning</a></li><li><a href="../Planning/pl00020.html">Connecting to an existing infrastructure</a></li></ul></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Clustering: Max Messages Behavior</h1>




<div class="body conbody"><p class="shortdesc"> To prevent the action that is specified in the <code class="ph codeph">Max Messages Behavior</code> attribute from causing a problem, ensure that there is sufficient memory available in your system and that you specify a value in the  <code class="ph codeph">Max Messages</code>attribute such that the <code class="ph codeph">Max Messages Behavior</code> is never implemented. </p>
<p class="p">In a cluster, the <code class="ph codeph">Reject New Messages</code> behavior is used to indicate that messages should not be discarded, if they are forwarded from a remote server; the messages are queued even though this action might mean that the limit specified in the <code class="ph codeph">Max Messages</code> attribute of the messaging policy is exceeded. If messages are being published locally, and a  subscription has <code class="ph codeph">Reject New Messages</code> behavior, the local publish, and forwarding, will fail as it would in a non-clustered environment.</p>
<p class="p">When a message is published on the same server as a subscription, the server knows the behavior that the subscription is using and, if  <code class="ph codeph">Reject New Messages</code> is specified, the publish fails if there is a subscriber that has already reached its <code class="ph codeph">Max Messages</code> limit. </p>
<p class="p">However, in a cluster, if a message is published on a remote server, the information that indicates that it should be forwarded to another server in the cluster is limited; the remote server is aware only that the topic is of interest to one or more subscribers on another server, or servers, in the cluster. In this situation, it is possible for the message to be forwarded to a server and be published to some subscribers that would reject the message because they have reached their <code class="ph codeph">Max Messages</code> limit, and cause the original publish to fail. However, it is possible that the same message is published successfully to other subscribers because they have not reached their <code class="ph codeph">Max Messages</code> limit and, therefore, the publish operation is successful and cannot be failed. The resulting stranded message cannot be forwarded to those subscribers that have reached their <code class="ph codeph">Max Messages</code> limit and prevents the forwarding of subsequent messages. </p>
<p class="p">To avoid more messages building up than was originally specified by the <code class="ph codeph">Max Messages</code> limit, consider specifying <code class="ph codeph">Reject New Messages</code> for only those applications that must receive all messages that are published for them in a cluster. Specify <code class="ph codeph">Discard Old Messages</code> to ensure that the most recent messages are delivered to subscribers while the size of their message backlog is kept to a minimum.</p>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Planning/clusteringconsiderations.html" title="Key points to consider if you are planning to use clustering in your Eclipse Amlen solution.">Clustering considerations</a></div></div><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="../Overview/ov00150_.html">Clustering in <span class="ph">Eclipse Amlen</span></a></li></ul></div><div class="linklist reltasks"><strong>Related tasks</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="../Administering/ad00361_.html">Configuring message hubs by using the <span class="ph">Amlen WebUI</span></a></li><li class="linklist"><a class="link" href="../Administering/ad00451_.html">Creating and updating a topic policy by using REST Administration APIs</a></li><li class="linklist"><a class="link" href="../Administering/ad00452_.html">Creating and updating a subscription policy by using REST Administration APIs</a></li></ul></div></nav>
</article></main></body></html>