<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="It is best practice for the retained messages for a topic in a cluster to be published to the same server and with the same quality of service. Keep the number of retained messages to a minimum."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Clustering: Retained messages</title></head><body id="clusteringretainedmsgs"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a><ul><li><a href="../Planning/pl00030.html">Installation planning</a></li><li><a href="../Planning/ov00101_.html">Messaging patterns</a></li><li><a href="../Planning/pl00010.html">Messaging planning</a></li><li><a href="../Planning/clusteringconsiderations.html">Clustering considerations</a><ul><li><a href="../Planning/clusteringsubscriptionvis.html">Clustering: In a request-response model</a></li><li class="active"><a href="../Planning/clusteringretainedmsgs.html">Clustering: Retained messages</a></li><li><a href="../Planning/clusteringtimeserversynch.html">Clustering: Time server synchronization</a></li><li><a href="../Planning/clusteringmsgsbetweenservers.html">Clustering: Sending messages between cluster servers</a></li><li><a href="../Planning/clusteringmessageorder.html">Clustering: Message ordering</a></li><li><a href="../Planning/clusteringmsgpolicyconsiderations.html">Clustering: Max Messages Behavior</a></li><li><a href="../Planning/clusteringclientstate.html">Clustering: Client state</a></li><li><a href="../Planning/clusteringomping.html">Clustering: Testing multicast connectivity between servers in a cluster</a></li></ul></li><li><a href="../Planning/pl00002_.html">Capacity planning</a></li><li><a href="../Planning/pl00004.html">Performance planning</a></li><li><a href="../Planning/ov40001.html">High availability planning</a></li><li><a href="../Planning/pl00020.html">Connecting to an existing infrastructure</a></li></ul></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Clustering: Retained messages</h1>




<div class="body conbody"><p class="shortdesc">It is best practice for the retained messages for a topic in a cluster to be published to the same server and with the same quality of service. Keep the number of retained messages to a minimum.</p>
<p class="p">When an application first subscribes to a topic, the application expects to receive retained messages that match the subscribing topic and that such retained messages are available when the application connects.</p>
<p class="p">All retained messages published anywhere in the cluster are sent to all other servers in the cluster.  These messages are then stored on each server in the cluster; for this reason, it is best practice to keep the number of retained messages that are used to a minimum.</p>
<p class="p">The servers in the cluster ensure that such messages are synchronized, but there might be occasions when a retained message that is published on one server has not yet been sent to one or more of the other servers in the cluster. For this reason, the set of retained messages that an application receives when it connects to one server may not yet match the set that it receives when it connects to a different server in the cluster. As retained messages arrive at a server, they are delivered to existing subscribing applications as live messages; as the servers catch up, applications receive the new retained messages.</p>
<p class="p">To ensure correct message processing, all servers that are connected to one another in a cluster must share a common view of the set of retained messages in the cluster. To maintain this common view, whenever a server detects that the set of retained messages that it receives from a cluster member does not match the set that the other cluster members have received, the unsynchronized server requests updates after 30 minutes from the most up-to-date server to which it is connected. It is, therefore, possible, if a server is removed from the cluster before it sends locally published retained message updates to other cluster members, for any retained message updates that are visible at the removed server not to be sent around the cluster because all remaining servers consider themselves to be up-to-date with messages that originated at the removed server.  </p>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Planning/clusteringconsiderations.html" title="Key points to consider if you are planning to use clustering in your Eclipse Amlen solution.">Clustering considerations</a></div></div><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="../Overview/ov00150_.html">Clustering in <span class="ph">Eclipse Amlen</span></a></li><li class="linklist"><a class="link" href="../Overview/ov00033.html">Retained messages</a></li></ul></div></nav>
</article></main></body></html>