<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="If it is imperative that quality of service (QoS) 1 and QoS 2 messages are always received by an application, connect an instance of the receiving application with a shared MQTT subscription or as a JMS application to each server that is in the cluster."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Clustering: Sending messages between cluster servers</title></head><body id="clusteringmsgsbetweenservers"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../eclipse_amlen.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a><ul><li><a href="../Planning/pl00030.html">Installation planning</a></li><li><a href="../Planning/ov00101_.html">Messaging patterns</a></li><li><a href="../Planning/pl00010.html">Messaging planning</a></li><li><a href="../Planning/clusteringconsiderations.html">Clustering considerations</a><ul><li><a href="../Planning/clusteringsubscriptionvis.html">Clustering: In a request-response model</a></li><li><a href="../Planning/clusteringretainedmsgs.html">Clustering: Retained messages</a></li><li><a href="../Planning/clusteringtimeserversynch.html">Clustering: Time server synchronization</a></li><li class="active"><a href="../Planning/clusteringmsgsbetweenservers.html">Clustering: Sending messages between cluster servers</a></li><li><a href="../Planning/clusteringmessageorder.html">Clustering: Message ordering</a></li><li><a href="../Planning/clusteringmsgpolicyconsiderations.html">Clustering: Max Messages Behavior</a></li><li><a href="../Planning/clusteringclientstate.html">Clustering: Client state</a></li><li><a href="../Planning/clusteringomping.html">Clustering: Testing multicast connectivity between servers in a cluster</a></li><li><a href="../Administering/clusteringtls.html">Clustering: User Provided TLS Credentials</a></li></ul></li><li><a href="../Planning/pl00002_.html">Capacity planning</a></li><li><a href="../Planning/pl00004.html">Performance planning</a></li><li><a href="../Planning/ov40001.html">High availability planning</a></li><li><a href="../Planning/pl00020.html">Connecting to an existing infrastructure</a></li></ul></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Clustering: Sending messages between cluster servers</h1>




<div class="body conbody"><p class="shortdesc">If it is imperative that quality of service (QoS) 1 and QoS 2 messages are always
received by an application, connect an instance of the receiving application with a shared MQTT
subscription or as a JMS application to each server that is in the cluster.</p>
<p class="p">When a message is published on a server in the cluster, it is delivered to subscribers attached to the same server and, if there are known subscribers on other servers, it is forwarded to the other servers where it is published to subscribers attached there. Subscribers on the same server receive the message immediately; subscribers on other servers receive the message at a later point when it has been forwarded to those servers.</p>
<p class="p">Messages are forwarded according to the QoS that is requested at the time of publishing; QoS 0 messages are sent as quickly as possible but unreliably and QoS 1 or QoS 2 messages are sent more slowly but reliably. As messages are forwarded, a queue of such messages may build up especially if the server that they are destined for is currently disconnected.</p>
<p class="p">The size of the forwarding queues is not generally limited. However, when server memory levels become low, a limit on total message data is imposed on the forwarding queues. The limit employs a mechanism similar to the DiscardOldMessages mechanism, to discard older messages until the amount of memory that the queues consume is reduced. The forwarding queue for QoS0 messages is limited first, but if the memory continues to be depleted, the queue of QoS 1 and QoS 2 messages is also limited. This can mean that, in low memory situations, QoS 1 and QoS 2 messages that are being forwarded to remote servers are discarded. If it is a requirement that QoS 1 and QoS 2 messages are always received by an application, ensure that you connect an instance of the receiving application with a shared MQTT subscription or as a JMS application to each server in the cluster. </p>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Planning/clusteringconsiderations.html" title="Key points to consider if you are planning to use clustering in your Eclipse Amlen solution.">Clustering considerations</a></div></div><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="../Overview/ov00150_.html">Clustering in <span class="ph">Eclipse Amlen</span></a></li></ul></div></nav>
</article></main></body></html>