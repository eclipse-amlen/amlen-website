<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="System administrators can copy a client certificate to be used in Eclipse Amlen by using the Eclipse Amlen REST API PUT method. The certificate is copied to /tmp/userfiles System administrators can then import the client certificate to the truststore of the certificate profile that is referenced in the security profile that is associated with the client certificate by using the Eclipse Amlen REST API POST method. Existing client certificates can also be updated by system administrators by using the Eclipse Amlen REST API POST method."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Creating and updating a client certificate by using REST Administration APIs</title></head><body id="ad00722_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a><ul><li><a href="../Administering/ad00710_.html">Configuring certificate profiles</a></li><li><a href="../Administering/ad00730_.html">Configuring Lightweight Third Party Authentication</a></li><li><a href="../Administering/ad00760_.html">Configuring OAuth</a></li><li><a href="../Administering/ad00740_.html">Configuring security profiles</a></li><li><a href="../Administering/ad00720_.html">Configuring client certificates</a><ul><li><a href="../Administering/ad00721_.html">Configuring client certificates by using the Amlen WebUI</a></li><li class="active"><a href="../Administering/ad00722_.html">Creating and updating a client certificate by using REST Administration APIs</a></li></ul></li><li><a href="../Administering/ad00728_.html">Configuring trusted certificates</a></li><li><a href="../Administering/dv00022.html">Configuring a pre-shared key file</a></li><li><a href="../Administering/ad00750_.html">Configuring Federal Information Processing Standards (FIPS)</a></li><li><a href="../Administering/ad00753_.html">Closing client connections</a></li></ul></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Creating and updating a client certificate by using <span class="ph">REST Administration APIs</span></h1>






<div class="body taskbody"><p class="shortdesc">System administrators can copy a client certificate to be used in <span class="ph">Eclipse Amlen</span> by using the <span class="ph">Eclipse Amlen</span> REST API PUT method. The certificate is copied to <span class="ph filepath">/tmp/userfiles</span> System administrators can then import the client certificate to the truststore of the certificate profile that is referenced in the security profile that is associated with the client certificate by using the <span class="ph">Eclipse Amlen</span> REST API POST method. Existing client certificates can also be updated by system administrators by using the <span class="ph">Eclipse Amlen</span> REST API POST method.</p>
<section class="section context">
<p class="p">You can copy a client certificate to be used in <span class="ph">Eclipse Amlen</span> by using the <span class="ph">Eclipse Amlen</span> REST API PUT, or by using the <span class="ph">Amlen WebUI</span>. For more information about using the <span class="ph">Amlen WebUI</span> to upload a client certificate, see <a class="xref" href="ad00721_.html" title="System administrators can configure client certificates by using the Security Settings page in the Amlen WebUI.">Configuring client certificates by using the Amlen WebUI</a>.</p>
</section>
<section><ol class="ol steps"><li class="li step stepexpand" id="ad00722___1">
        <span class="ph cmd">To create a client certificate, first copy a trusted CA certificate or a client certificate to <span class="ph">Eclipse Amlen</span> by using the <span class="ph">Eclipse Amlen</span> REST API PUT method with the following <span class="ph">Eclipse Amlen</span> file URI: </span>
        <div class="itemgroup info">
          <p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/file/&lt;filename&gt;</code></p>
          <p class="p">The certificate is copied to <span class="ph filepath">/tmp/userfiles</span></p>
        </div>
      </li><li class="li step stepexpand">
        <span class="ph cmd">To create or update a client certificate, use the <span class="ph">Eclipse Amlen</span> REST API POST method
          with the following <span class="ph">Eclipse Amlen</span>
          configuration URI:</span>
        <div class="itemgroup info">
          <p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration/</code></p>
        </div>
      </li><li class="li step stepexpand">
<span class="ph cmd">Provide ClientCertificate object configuration data in the payload of the POST method by using the following schema. <span class="keyword parmname">Content-type</span> is set to <kbd class="ph userinput">application/json</kbd>. Ensure that capitalization and double quotation marks are used as shown. </span>
<div class="itemgroup info"><pre class="pre codeblock"><code>
{    
  "ClientCertificate": [{"SecurityProfileName": "string", "CertificateName": "string", "Overwrite": true|false },
                        {"SecurityProfileName": "string", "CertificateName": "string", "Overwrite": true|false },
                        {"SecurityProfileName": "string", "CertificateName": "string", "Overwrite": true|false }]
}</code></pre>Where:<dl class="dl">
          
            <dt class="dt dlterm"><var class="keyword varname">CertificateName</var></dt>
            <dd class="dd">Required.</dd>
            <dd class="dd ddexpand">Specifies a value for the client certificate.</dd>
            <dd class="dd ddexpand">The name can be a maximum of 255 alphanumeric characters. </dd>
            <dd class="dd ddexpand">The name must not have leading or trailing spaces and cannot contain control characters, commas, double quotation marks, backslashes, or equal signs. The first character must not be a number. </dd>
            <dd class="dd ddexpand">After the profile is created, this name cannot be changed.</dd>
          
          
            <dt class="dt dlterm">SecurityProfileName</dt>
            <dd class="dd">Required if you are creating a client certificate.</dd>
            <dd class="dd ddexpand">Specifies the name of the security profile that the client certificate is associated with.</dd>
          
          
            <dt class="dt dlterm">Overwrite: true|false</dt>
            <dd class="dd">Specifies whether an existing certificate is overwritten if it has the same name.</dd>
            <dd class="dd ddexpand">The default value is false which means that an existing certificate is not overwritten if it has the same name.</dd>
          
          </dl><p class="p">You can check that the configuration of your client certificate is as expected by using the <span class="ph">Eclipse Amlen</span> REST Administration API GET method. For more information about the GET method, see <a class="xref" href="ad00366_.html" title="System administrators can view configuration details of configuration objects for which the name can be configured.">Viewing configuration details of objects that can be named by using REST Administration APIs</a>.</p></div>
</li></ol></section>
<section class="example">The following example shows the steps required to create a client certificate by using cURL:<ol class="ol">
        <li class="li">Copy the client certificate to <span class="ph filepath">/tmp/userfiles</span> by using the REST API PUT method:<pre class="pre codeblock"><code>
curl -X PUT -T imaCA-crt.pem  http://127.0.0.1:9089/ima/v1/file/TestCACertKey.pem</code></pre></li>
        <li class="li">Copy the certificate and key to <span class="ph filepath">/tmp/userfiles</span> to create a CertificateProfile by using the REST API PUT method:<pre class="pre codeblock"><code>
curl -X PUT -T certFree.pem  http://127.0.0.1:9089/ima/v1/file/TestCert.pem
curl -X PUT -T keyFree.pem http://127.0.0.1:9089/ima/v1/file/TestKey.pem</code></pre></li>
        <li class="li">Create and import the CertificateProfile by using the REST API POST method: <pre class="pre codeblock"><code>
curl -X POST \
  -H 'Content-Type: application/json'  \
  -d '{
       "CertificateProfile":{
        "TestCertProf":{
         "Certificate": "TestCert.pem",
         "Key": "TestKey.pem"
       }
      }
     }
  ' \
http://127.0.0.1:9089/ima/v1/configuration</code></pre></li>
        <li class="li">Create the SecurityProfile by using the REST API POST method:
          <pre class="pre codeblock"><code>
curl -X POST 
  -H 'Content-Type: application/json'  \
  -d '{
       "SecurityProfile":{
        "TestSecProf":{
         "CertificateProfile": "TestCertProf",
         "UsePasswordAuthentication": false
       }
      }
     }
  ' \
http://127.0.0.1:9089/ima/v1/configuration</code></pre></li>
        <li class="li">Create the ClientCertificate by using the REST API POST method:
          <pre class="pre codeblock"><code>
curl -X POST 
  -H 'Content-Type: application/json'  \
  -d '{"ClientCertificate":[{
        "SecurityProfileName":"TestSecProf",
        "CertificateName": "TestCACertKey"
       }]
      }
  ' \
http://127.0.0.1:9089/ima/v1/configuration</code></pre></li>
      </ol></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Administering/ad00720_.html" title="You can authenticate based on client certificates by uploading the root CA certificates and intermediate CA certificates, or the client certificates to the Eclipse Amlen truststore. You can upload the CA certificates or client certificates by using the Amlen WebUI or by using REST Administration APIs.">Configuring client certificates</a></div></div></nav></article></main></body></html>