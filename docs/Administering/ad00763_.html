<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2021"><meta name="generator" content="DITA-OT"><meta name="description" content="System administrators can copy a key file to Eclipse Amlen to use in an OAuth profile by using the Eclipse Amlen REST API PUT method. System administrators can create an OAuth profile by using the Eclipse Amlen REST API POST method. Existing OAuth profiles can also be updated by system administrators by using the Eclipse Amlen REST API POST method."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Creating and updating an OAuth profile by using REST Administration APIs</title></head><body id="ad00763_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a><ul><li><a href="../Administering/ad00710_.html">Configuring certificate profiles</a></li><li><a href="../Administering/ad00730_.html">Configuring Lightweight Third Party Authentication</a></li><li><a href="../Administering/ad00760_.html">Configuring OAuth</a><ul><li><a href="../Administering/ad00761_.html">Configuring OAuth profiles by using the Amlen WebUI</a></li><li class="active"><a href="../Administering/ad00763_.html">Creating and updating an OAuth profile by using REST Administration APIs</a></li></ul></li><li><a href="../Administering/ad00740_.html">Configuring security profiles</a></li><li><a href="../Administering/ad00720_.html">Configuring client certificates</a></li><li><a href="../Administering/ad00728_.html">Configuring trusted certificates</a></li><li><a href="../Administering/dv00022.html">Configuring a pre-shared key file</a></li><li><a href="../Administering/ad00750_.html">Configuring Federal Information Processing Standards (FIPS)</a></li><li><a href="../Administering/ad00753_.html">Closing client connections</a></li></ul></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Creating and updating an OAuth profile by using <span class="ph">REST Administration APIs</span></h1>






<div class="body taskbody"><p class="shortdesc">System administrators can copy a key file to <span class="ph">Eclipse Amlen</span> to use in an OAuth profile by using the <span class="ph">Eclipse Amlen</span> REST API PUT method. System administrators can create an OAuth profile by using the <span class="ph">Eclipse Amlen</span> REST API POST method. Existing OAuth profiles can also be updated by system administrators by using the <span class="ph">Eclipse Amlen</span> REST API POST method.</p>
<section class="section context">
<p class="p">You can create or update an OAuth profile by using <span class="ph">REST Administration APIs</span>, or by using the <span class="ph">Amlen WebUI</span>. For more information about using the <span class="ph">Amlen WebUI</span> to create an OAuth profile, see <a class="xref" href="ad00761_.html" title="System administrators can configure OAuth profiles by using the Security Settings page in the Amlen WebUI.">Configuring OAuth profiles by using the Amlen WebUI</a>.</p>
</section>
<section><ol class="ol steps"><li class="li step stepexpand" id="ad00763___1"><strong>Optional: </strong>
        <span class="ph cmd">Import a key file to use to secure the connection to the authorization server by using
          the <span class="ph">Eclipse Amlen</span> REST API PUT method with the
          following <span class="ph">Eclipse Amlen</span> file URI: </span>
        <div class="itemgroup info">
          <p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/file/&lt;filename&gt;</code></p>
          <p class="p">The certificate is copied to <span class="ph filepath">/tmp/userfiles</span></p>
        </div>
      </li><li class="li step stepexpand">
<span class="ph cmd">To create or update an OAuth profile, use the <span class="ph">Eclipse Amlen</span> REST API POST method with the following <span class="ph">Eclipse Amlen</span> configuration URI:</span>
<div class="itemgroup info">
<p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration/</code></p>
</div>
</li><li class="li step stepexpand">
<span class="ph cmd">Provide OAuthProfile object configuration data in the payload of the POST method by using the
following schema. <span class="keyword parmname">Content-type</span> is set to
<kbd class="ph userinput">application/json</kbd>. Ensure that capitalization and double quotation marks are
used as shown. </span>
<div class="itemgroup info"><pre class="pre codeblock"><code>
{    
  "OAuthProfile": {
    "&lt;NameOfOAuthProfile&gt;": {
      "ResourceURL": "string",
      "KeyFileName": "string",
      "AuthKey": "string",
      "UserInfoURL": "string",
      "UserInfoKey": "string",      
      "GroupInfoKey": "string",
      "TokenSendMethod":   "URLParam" (default)|"HTTPHeader",
      "Overwrite": true|false
     }
   }
}</code></pre>Where:<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">NameOfOAuthProfile</var></dt>
<dd class="dd">Required.</dd>
<dd class="dd ddexpand">Specifies a name for the OAuth profile.</dd>
<dd class="dd ddexpand">The name can be a maximum of 256 alphanumeric characters. The first character must not be a
number. </dd>
<dd class="dd ddexpand">After the profile is created, this name cannot be changed.</dd>


<dt class="dt dlterm">ResourceURL</dt>
<dd class="dd">Required if you are creating an OAuth profile.</dd>
<dd class="dd ddexpand">Specifies the authorization server URL that is used to validate the access token.</dd>
<dd class="dd ddexpand">The URL must include the protocol. The protocol can be either <code class="ph codeph">http</code> or
<code class="ph codeph">https</code>. </dd>


<dt class="dt dlterm">KeyFileName</dt>
<dd class="dd">Specifies the name of the key file (certificate for the OAuth Server) to use with this OAuth
profile. The file must exist on <span class="ph">Eclipse Amlen</span> in the
following path:<span class="ph filepath"> /var/messagesight/data/certificates/OAuth/</span>.</dd>
<dd class="dd ddexpand">The name can be a maximum of 255 alphanumeric characters. The first character must not be a
number.</dd>


<dt class="dt dlterm">CheckServerCert</dt>
<dd class="dd">Available in version 5.0.0.2 and later releases.  Possible options are as follows:<dl class="dl">

<dt class="dt dlterm">TrustStore</dt>
<dd class="dd">When connecting to the LDAP server, the certificate that is presented by the server is checked
using the certificate that is uploaded to the product trust store.</dd>


<dt class="dt dlterm">PublicTrust</dt>
<dd class="dd">The certificate that is presented by the LDAP server is checked against the public certificates
that are installed as part of the operating system.</dd>


<dt class="dt dlterm">DisableVerify</dt>
<dd class="dd">No certificate verification is performed when connecting to the LDAP server. This is an insecure
option that is designed for testing purposes only.</dd>

</dl></dd>


<dt class="dt dlterm">AuthKey</dt>
<dd class="dd">Specifies the name of the key that is used to store the access token.</dd>
<dd class="dd ddexpand">The default value is <code class="ph codeph">access_token</code>.</dd>


<dt class="dt dlterm">UserInfoURL</dt>
<dd class="dd">Specifies the authorization server URL that is used to retrieve the user information.</dd>
<dd class="dd ddexpand">The URL must include the protocol. The protocol can be either <code class="ph codeph">http</code> or
<code class="ph codeph">https</code>. </dd>


<dt class="dt dlterm">UserInfoKey</dt>
<dd class="dd">Specifies the name of the key that is used to store the user information.</dd>
<dd class="dd ddexpand">The name must not have leading or trailing spaces and cannot contain control characters, commas,
double quotation marks, backslashes, or equal signs.</dd>


<dt class="dt dlterm">GroupInfoKey</dt>
<dd class="dd">Specifies the name of the key that is used to retrieve the group information.</dd>
<dd class="dd ddexpand">The name must not have leading or trailing spaces and cannot contain control characters, commas,
double quotation marks, backslashes, or equal signs.</dd>
<dd class="dd ddexpand"> If this parameter is specified, <span class="ph">Eclipse Amlen</span> does not
retrieve group information from any other source.</dd>


<dt class="dt dlterm">TokenSendMethod</dt>
<dd class="dd">Specifies how an access token is included in the request to a Resource URL either as a parameter
in the URL (the default) or as an HTTP Header in the request. </dd>
<dd class="dd ddexpand">The <code class="ph codeph">AuthKey</code> setting determines the name of the URL parameter or the HTTP
Header.</dd>


<dt class="dt dlterm">Overwrite: true|false</dt>
<dd class="dd">Specifies whether an existing certificate and key are overwritten if they have the same
name.</dd>
<dd class="dd ddexpand">The default value is false which means that an existing certificate and key are not overwritten
if they have the same name.</dd>

</dl><p class="p">You can check that the configuration of your OAuth profile is as expected by using the <span class="ph">Eclipse Amlen</span> REST Administration API GET method. For more
information about the GET method, see <a class="xref" href="ad00366_.html" title="System administrators can view configuration details of configuration objects for which the name can be configured.">Viewing configuration details of objects that can be named by using REST Administration APIs</a>.</p></div>
</li></ol></section>
<section class="example">
<div class="p">The following example shows the creation of an OAuth profile named <code class="ph codeph">MyOAuthProfile</code> by using cURL:<pre class="pre codeblock"><code>
curl -X POST \
   -H 'Content-Type: application/json'  \
   -d  '{ 
         "OAuthProfile": {   
           "MyOAauthProfile": {
             "ResourceURL": "http://myOAuthexample.com/home.jsp"                         
          }
        }
    }
 '  \
http://127.0.0.1:9089/ima/v1/configuration/</code></pre>The following shows an example response to the POST method.<pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre></div>
</section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Administering/ad00760_.html" title="You can configure OAuth by using OAuth profiles. The OAuth profile defines the URLs and keys that are required to use OAuth single sign-on with Eclipse Amlen. The OAuth profile must be associated with a security profile, and the security profile must be associated with an endpoint.">Configuring OAuth</a></div></div></nav></article></main></body></html>