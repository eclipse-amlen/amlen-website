<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="System administrators can change the configured licensed usage for Eclipse Amlen and accept the license by using a single REST Administration API."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Configuring the licensed usage for Eclipse Amlen and accepting the license by using REST Administration APIs</title></head><body id="ad00793_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../eclipse_amlen.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a><ul><li><a href="../Administering/ad00210_.html">Network interface controllers</a></li><li><a href="../Administering/ad00380_.html">Configuring the server name</a></li><li><a href="../Administering/ad00290_.html">Configuring log files</a></li><li><a href="../Administering/ad00400_.html">Configuring your system for high availability</a></li><li><a href="../Administering/ad00790_.html">Configuring licensed usage and accepting the license for Eclipse Amlen  </a><ul><li><a href="../Administering/ad00791_.html">Viewing the licensed usage for Eclipse Amlen by using the Amlen WebUI</a></li><li><a href="../Administering/ad00795_.html">Configuring licensed usage and accepting the license for Eclipse Amlen  </a><ul><li class="active"><a href="../Administering/ad00793_.html">Configuring the licensed usage for Eclipse Amlen and accepting the license by using REST Administration APIs</a></li><li><a href="../Administering/ad00797.html">Viewing the licensed usage for Eclipse Amlen by using REST Administration APIs</a></li></ul></li></ul></li><li><a href="../Administering/ad00280_.html">Starting, stopping, restarting and viewing the status of the Eclipse Amlen server</a></li></ul></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Configuring the licensed usage for <span class="ph">Eclipse Amlen</span> and
    accepting the license by using REST Administration APIs</h1>
  
  
  <div class="body taskbody"><p class="shortdesc">System administrators can change the configured licensed usage for <span class="ph">Eclipse Amlen</span> and accept the license by using a single REST
    Administration API. </p>
    <section class="section context">You can set the licensed usage of your <span class="ph">Eclipse Amlen</span> and accept the license by using a single
      REST Administration API. The <span class="ph">Eclipse Amlen</span> server will
      start in maintenance mode until the license is accepted. </section>
    <section><ul class="ul steps-unordered"><li class="li step stepexpand">
        <span class="ph cmd">To set the licensed usage of <span class="ph">Eclipse Amlen</span> and accept the license, use the <span class="ph">Eclipse Amlen</span> REST API POST method. </span>
        <ol class="ol substeps">
          <li class="li substep substepexpand">
            <span class="ph cmd">Use the following <span class="ph">Eclipse Amlen</span> configuration URI:</span>
            <div class="itemgroup info">
              <p class="p"><code class="ph codeph">curl -X POST http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration</code></p>
            </div>
          </li>
          <li class="li substep substepexpand">
            <span class="ph cmd">Provide object configuration data in the payload of the POST method by using the following schema: </span>
            <div class="itemgroup info"><pre class="pre codeblock"><code>
{  
 "LicensedUsage": "LicenseType",       
 "Accept": true              
}
</code></pre>Where:<ul class="ul">
              <li class="li">
                <dl class="dl">
                  
                    <dt class="dt dlterm">LicenseType</dt>
                    <dd class="dd">Specifies the licensed usage. Specify one of:<dl class="dl">
                      
                        <dt class="dt dlterm">Developers</dt>
                        <dd class="dd">For use in a development and test environment.</dd>
                      
                      
                        <dt class="dt dlterm">Non-Production</dt>
                        <dd class="dd">For use in a development and test environment.</dd>
                      
                      
                        <dt class="dt dlterm">Production</dt>
                        <dd class="dd">For use in a production environment.</dd>
                      
                      
                        <dt class="dt dlterm">IdleStandby</dt>
                        <dd class="dd">For use in a high availability environment.</dd>
                      
                      </dl></dd>
                  
                </dl>
              </li>
              <li class="li">
                <dl class="dl">
                  
                    <dt class="dt dlterm">Accept: true|false</dt>
                    <dd class="dd">Specifies the acceptance of the licensed usage. </dd>
                    <dd class="dd ddexpand">To accept the license, set Accept to true.</dd>
                    <dd class="dd ddexpand">Once the license is accepted, it cannot be unaccepted by setting the value to false.</dd>
                  
                </dl>
              </li>
              </ul><div class="note note note_note"><span class="note__title">Note:</span> When server is started for the first time, the <span class="keyword parmname">LicensedUsage</span> is set to <kbd class="ph userinput">Developers</kbd>. The server will start in maintenance mode. <div class="p">You can view the server status by using the following REST API GET method:<pre class="pre codeblock"><code>curl -X GET http://127.0.0.1:9089/ima/v1/service/status/Server</code></pre>The server status shows: </div><pre class="pre codeblock"><code> 
{
  "Version":"v1",
  "Server": {
    "Name": "RDDockDev1:9089",
    "UID": "poHdWvCE",
    "Status": "Running",
    "State": 9,
    "StateDescription": "Running (maintenance)",
    "ServerTime": "2016-04-12T19:01:23.512Z",
    "UpTimeSeconds": 27,
    "UpTimeDescription": "0 days 0 hours 0 minutes 27 seconds",
    "Version": "2.0 20160610-0700",
    "ErrorCode": 387,
    "ErrorMessage": "<span class="ph">Eclipse Amlen</span> is not fully functional until you accept the license agreement using <span class="ph">Eclipse Amlen</span> REST API."
  }
}</code></pre><p class="p">For more information about viewing server status, see <a class="xref" href="../Reference/ApplianceCmd/cmd_status_server.html">Show the status of an Eclipse Amlen server and services</a></p></div></div>
          </li>
        </ol>
      </li><li class="li step stepexpand">
        <span class="ph cmd">View the value of the current license type by using the following REST API GET method:  </span>
        <div class="itemgroup info">
          <pre class="pre codeblock"><code>curl -X GET http://127.0.0.1:9089/ima/v1/configuration/LicensedUsage</code></pre>
          <p class="p">An example response to the GET method:</p>
          <pre class="pre codeblock"><code>
{
  "Version":"v1",
  "LicensedUsage": "Developers",
  "Accept": false
}</code></pre>
        </div>
      </li><li class="li step stepexpand">
        <span class="ph cmd">Accept the current license, or change the value of the current licensed usage and
          accept the new license type. </span>
        <ul class="ul choices">
          <li class="li choice">If the value that is set for <span class="keyword parmname">LicensedUsage</span> is correct, you
            can accept the license by using the following REST API POST
              method:<pre class="pre codeblock"><code>
curl -X POST \
   -H  'Content-Type: application/json'  \
   -d  '{
         "Accept": true 
        }
    '   \
http://127.0.0.1:9089/ima/v1/configuration
</code></pre><p class="p">The
              server automatically restarts in production mode, using the current license that is
              specified.</p></li>
          <li class="li choice">If the value that is set for <span class="keyword parmname">LicensedUsage</span> is not correct,
            you can change the license type and accept the updated license by using the following
            REST API POST
              method:<pre class="pre codeblock"><code>
curl -X POST \
   -H  'Content-Type: application/json'  \
   -d  '{
         "LicensedUsage":"Production"|"Non-Production"|"IdleStandby|"Developers",
         "Accept": true 
        }
    '   \
http://127.0.0.1:9089/ima/v1/configuration
</code></pre><p class="p">The
              server to automatically restarts in production mode, using the license that is
              specified.</p></li>
        </ul>
      </li></ul></section>
    <section class="example"><div class="p">The following example shows setting <span class="ph">Eclipse Amlen</span> licensed usage to
          <code class="ph codeph">Non-Production</code> without accepting the
        license:<pre class="pre codeblock"><code>
curl -X POST \
   -H  'Content-Type: application/json'  \
   -d  '{
         "LicensedUsage": "Non-Production"
        }
    '   \
http://127.0.0.1:9089/ima/v1/configuration
</code></pre></div><div class="p">An
        example response to the POST
        method:<pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre></div><div class="p">As
        the license is not accepted, when you view the server status by using the REST API GET
        method:<pre class="pre codeblock"><code>curl -X GET http://127.0.0.1:9089/ima/v1/service/status/Server</code></pre>The
        server status
        shows:<pre class="pre codeblock"><code> 
{
  "Version":"v1",
  "Server": {
    "Name": "RDDockDev1:9089",
    "UID": "poHdWvCE",
    "Status": "Running",
    "State": 9,
    "StateDescription": "Running (maintenance)",
    "ServerTime": "2016-04-12T19:01:23.512Z",
    "UpTimeSeconds": 27,
    "UpTimeDescription": "0 days 0 hours 0 minutes 27 seconds",
    "Version": "2.0 20160610-0700",
    "ErrorCode": 387,
    "ErrorMessage": "IBM MessageSight is not fully functional until you accept the license agreement using IBM IoT MessageSight REST API."
  }
}</code></pre></div><div class="p">The following example shows setting <span class="ph">Eclipse Amlen</span> licensed
        usage to <code class="ph codeph">Non-Production</code> and accepting the license by using
        cURL:<pre class="pre codeblock"><code>
curl -X POST \
   -H  'Content-Type: application/json'  \
   -d  '{
         "LicensedUsage": "Non-Production",
         "Accept": true 
        }
    '   \
http://127.0.0.1:9089/ima/v1/configuration
</code></pre></div>An
      example response to the POST
      method:<pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre></section>
    <section class="section postreq">
      <div class="p">Check the server status to verify that the <span class="ph">Eclipse Amlen</span> server has successfully restarted. It
        might take a few seconds for the server to stop and restart. You can view the server status
        by using the following REST API GET
        method:<pre class="pre codeblock"><code>curl -X GET http://127.0.0.1:9089/ima/v1/service/status/Server</code></pre>The
        server status shows:   </div>
      <pre class="pre codeblock"><code>
{
  "Version":"v1",
  "Server": {
    "Name": "RDDockDev1:9089",
    "UID": "poHdWvCE",
    "Status": "Running",
    "State": 1,
    "StateDescription": "Running (production)",
    "ServerTime": "2016-04-27T15:59:51.491-05:00",
    "UpTimeSeconds": 27,
    "UpTimeDescription": "0 days 0 hours 0 minutes 27 seconds",
    "Version": "2.0 20160610-0700",
    "ErrorCode": 0,
    "ErrorMessage": ""
  }
}</code></pre>
      <div class="p">View the value of the current license type by using the following REST API GET method:
        <pre class="pre codeblock"><code>curl -X GET http://127.0.0.1:9089/ima/v1/configuration/LicensedUsage</code></pre></div>
      <div class="p">An example response to the GET method:
        <pre class="pre codeblock"><code>{
  "Version":"v1",
  "LicensedUsage": "Non-Production",
  "Accept": true
}</code></pre></div>
      <p class="p">You can restart the <span class="ph">Eclipse Amlen</span> server manually by
        using REST Administration APIs. For more information about restarting <span class="ph">Eclipse Amlen</span>, see <a class="xref" href="../Reference/ApplianceCmd/fun_derestart.html">Restart the Eclipse Amlen server</a>.</p>
    </section>
  </div>
  <nav role="navigation" class="related-links"><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="ad00790_.html" title="You can configure the licensed usage and accept the license for Eclipse Amlen by using a single REST Administration API.">Configuring licensed usage and accepting the license for Eclipse Amlen</a></li><li class="linklist"><a class="link" href="ad00200_.html" title="System administrators can administer the server by using the Amlen WebUI, or by using REST Administration APIs.">Server administration</a></li></ul></div></nav>
  
</article></main></body></html>