<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="In this scenario, the primary node fails and the standby node takes over as the new primary node. Before a new backup can be setup, the new primary node fails. You must restart a new primary node and set up a new standby node. System administrators can use the High Availability page in the Amlen WebUI."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Bring back the last primary node after the primary and then the standby node fails by using the GUI</title></head><body id="ad00411_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a><ul><li><a href="../Administering/ad00210_.html">Network interface controllers</a></li><li><a href="../Administering/ad00380_.html">Configuring the server name</a></li><li><a href="../Administering/ad00290_.html">Configuring log files</a></li><li><a href="../Administering/ad00400_.html">Configuring your system for high availability</a><ul><li><a href="../Administering/ad00909_.html">Configuring HA </a></li><li><a href="../Administering/ad00416_.html">High availability scenarios</a><ul><li><a href="../Administering/ad00902_.html">Add a new standby node after the primary node failed</a></li><li><a href="../Administering/ad00903_.html">Add a new standby node after the original standby node failed</a></li><li><a href="../Administering/ad00904_.html">Bring back a standby node after it failed</a></li><li><a href="../Administering/ad00905_.html">Bring back primary and standby nodes after both nodes fail</a></li><li><a href="../Administering/ad00906_.html">Bring back the last primary node after the primary and then the standby node fails</a><ul><li class="active"><a href="../Administering/ad00411_.html">Bring back the last primary node after the primary and then the standby node fails by using the GUI</a></li><li><a href="../Administering/ad00412_.html">Bring back the last primary node after the primary and then the standby node fails by using the command line</a></li></ul></li><li><a href="../Administering/ad00907_.html">Bring back both appliances after both appliances fail simultaneously</a></li></ul></li></ul></li><li><a href="../Administering/ad00790_.html">Configuring licensed usage and accepting the license for Eclipse Amlen  </a></li><li><a href="../Administering/ad00280_.html">Starting, stopping, restarting and viewing the status of the Eclipse Amlen server</a></li></ul></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Bring back the last primary node after the primary and then
the standby node fails by using the GUI</h1>






<div class="body taskbody"><p class="shortdesc">In this scenario, the primary node fails and the standby
node takes over as the new primary node. Before a new backup can be
setup, the new primary node fails. You must restart a new primary
node and set up a new standby node. System administrators can use
the <span class="ph uicontrol">High Availability</span> page in the <span class="ph">Amlen WebUI</span>.</p>
<section class="section prereq">The two <span class="ph">Eclipse Amlen</span> appliances
must be physically connected. For more information about connecting
appliances, see <a class="xref" href="ad00400_.html" title="To recover from outages that might include planned events (such as maintenance and backups) and unplanned events (such as software failures, hardware failures, power failures, and disasters) you can configure an Eclipse Amlen server to serve as a backup.">Configuring the system for High Availability</a>.
The administrative state (AdminState) of the two appliances must also
be enabled. Go to the <span class="ph uicontrol">Network Settings</span> page
to set the administrative state of the appliances.</section>
<section class="section context"><p class="p">You can configure appliances for high availability by
using the <span class="ph">Amlen WebUI</span>,
or by using the command line. For more information about using the
command line to configure appliances for high availability, see <a class="xref" href="ad00412_.html" title="In this scenario, the primary node fails and the standby node takes over as the new primary node. Before a new backup can be setup, the new primary node fails. You must restart a new primary node and set up a new standby node. System administrators can use the imaserver HighAvailability commands on the command line.">Primary
node fails then standby node fails, bring back last primary node by
using the command line</a>. In this scenario, the content of the
store and configuration of Appliance B is preserved.</p><br><img class="image" src="scenario_06.jpg" alt="Primary node fails then backup fails, bring back last primary node"><br></section>
<section><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Clean the store on Appliance C:</span>
<ol type="a" class="ol substeps">
<li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">System Control</span> in the <span class="ph uicontrol">Appliance</span> menu.</span>
</li>
<li class="li substep"><span class="ph cmd">Select <span class="ph uicontrol">maintenance</span> from the <span class="ph uicontrol">Runmode</span> list.</span>
</li>
<li class="li substep"><span class="ph cmd">Stop the server by clicking <span class="ph uicontrol">Stop the server</span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Start the server by clicking <span class="ph uicontrol">Start the server</span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Select the <span class="ph uicontrol">clean store</span> check
box.</span></li>
<li class="li substep"><span class="ph cmd">Stop the server by clicking <span class="ph uicontrol">Stop the server</span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Start the server by clicking <span class="ph uicontrol">Start the server</span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Select <span class="ph uicontrol">production</span> from the <span class="ph uicontrol">Runmode</span> list.</span>
</li>
</ol>
</li><li class="li step stepexpand"><span class="ph cmd">Configure high availability on Appliance C: </span>
<ol type="a" class="ol substeps">
<li class="li substep substepexpand"><span class="ph cmd">From the <span class="ph uicontrol">Appliance</span> menu, select <span class="ph uicontrol">High
Availability</span>. </span></li>
<li class="li substep substepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Edit</span> in the <span class="ph uicontrol">Configuration</span> panel.
The <span class="keyword wintitle">Edit High Availability Configuration</span> page
is displayed.</span></li>
<li class="li substep substepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">High Availability Enabled</span> check
box.</span></li>
<li class="li substep substepexpand"><span class="ph cmd">Complete the <span class="ph uicontrol">High Availability Group</span> field.</span>
<div class="itemgroup info">The high availability group is used to automatically configure
appliances to pair with each other. The value must match the value
on Appliance B. When this value is set, you do not need to provide
replication or discovery addresses.</div></li>
<li class="li substep substepexpand" id="ad00411___save"><span class="ph cmd">Click <span class="ph uicontrol">Save</span>.</span>
</li>
<li class="li substep substepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Restart Later</span>.</span>
</li>
</ol>
</li><li class="li step stepexpand"><span class="ph cmd">Check the high availability configuration on Appliance
B is correct by selecting <span class="ph uicontrol">High Availability</span> from
the <span class="ph uicontrol">Appliance</span> menu. If you change any settings,
click <span class="ph uicontrol">Save</span> and then click <span class="ph uicontrol">Restart
Later</span>.</span><div class="itemgroup info"><div class="note tip note_tip"><span class="note__title">Tip:</span> It is recommended,
but not required, to set Appliance B as the preferred primary node.
To set Appliance B as the preferred primary node, select the <span class="ph uicontrol">When
both nodes start in auto-detect mode, this node is the preferred primary
node</span> check box in the <span class="ph uicontrol">Advanced Settings</span> section.</div></div>
</li><li class="li step stepexpand"><span class="ph cmd">Stop and then restart the <span class="ph">Eclipse Amlen</span> servers on both
of the appliances:</span><div class="itemgroup info"><div class="note tip note_tip"><span class="note__title">Tip:</span> As a best practice,
stop and restart the standby server first. Then stop and restart the
primary to limit the amount of time that the primary spends waiting
for the standby to become available.</div></div>
<ol type="a" class="ol substeps">
<li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">System Control</span> in the <span class="ph uicontrol">Appliance</span> menu.</span>
</li>
<li class="li substep"><span class="ph cmd">Stop the server by clicking <span class="ph uicontrol">Stop the server</span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Start the server by clicking <span class="ph uicontrol">Start the server</span>.</span>
</li>
</ol>
</li></ol></section>
<section class="section postreq">When the HA pair is up and running, you can view the status
of each appliance from the <span class="ph uicontrol">Status</span> menu on the <span class="ph">Amlen WebUI</span>. You can view
further information on the status of the appliance by using the <span class="ph uicontrol">System
Control</span> page. You can view further information about the
high availability role of the appliance by using the <span class="ph uicontrol">High
Availability</span> page.</section>
</div>
<nav role="navigation" class="related-links"><div class="linklist relconcepts"><strong>Related concepts</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="ad00280_.html" title="You can restart, stop and view the status of the Eclipse Amlen server by using REST Administration APIs or by using the Amlen WebUI.">Starting, stopping, restarting and viewing the status of the Eclipse Amlen server</a></li></ul></div><div class="linklist reltasks"><strong>Related tasks</strong><br><ul class="linklist"><li class="linklist"><a class="link" href="../Troubleshooting/tr00013_.html" title="System administrators can clean the store by using a REST Administration API or by using the Amlen WebUI. Cleaning the store deletes all persistent data.">Cleaning the store</a></li><li class="linklist"><a class="link" href="../Troubleshooting/tr00007_.html" title="System administrators can change the server state from Maintenance to Running, or from Running to Maintenance. The server state can be changed by using either REST Administration APIs or the Amlen WebUI.">Changing the server state</a></li></ul></div></nav>
</article></main></body></html>