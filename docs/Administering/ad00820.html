<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2021"><meta name="generator" content="DITA-OT"><meta name="description" content="To help optimize messaging performance, you can tune the Eclipse Amlen resource adapter properties that control the performance of message-driven beans and other messaging applications."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Tuning messaging performance for the Eclipse Amlen resource adapter in WebSphere Application Server</title></head><body id="ad00820"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a><ul><li><a href="../Administering/ad00102_.html">MQ Connectivity</a></li><li><a href="../Administering/workingwithjmsra.html">Eclipse Amlen resource adapter</a><ul><li><a href="../Administering/installingra.html">Installing Eclipse Amlen resource adapter on WebSphere Application Server</a></li><li><a href="../Administering/upgradingra.html">Updating the Eclipse Amlen resource adapter on WebSphere Application Server</a></li><li><a href="../Administering/configuringra.html">Configuring Eclipse Amlen resource adapter for WebSphere Application Server</a><ul><li><a href="../Administering/configurationoftheraobject.html">Configuring the Eclipse Amlen ResourceAdapter object</a></li><li><a href="../Administering/configuringinboundcomms.html">Configuring the Eclipse Amlen resource adapter for inbound communication</a></li><li><a href="../Administering/ad00800_.html">Programmatically configuring the Eclipse Amlen resource adapter for inbound communication</a></li><li><a href="../Administering/configuringoutboundcomms.html">Configuring the Eclipse Amlen resource adapter for outbound communication</a></li><li><a href="../Administering/configuringadminobjs.html">Configuring the Eclipse Amlen resource adapter for administered objects</a></li><li><a href="../Administering/ratransactionoptions.html">Configuring transactions in the Eclipse Amlen resource adapter</a></li><li class="active"><a href="../Administering/ad00820.html">Tuning messaging performance for the Eclipse Amlen resource adapter in WebSphere Application Server</a></li></ul></li><li><a href="../Administering/tlssecurityforjmsra.html">Transport Layer Security for the Eclipse Amlen resource adapter</a></li><li><a href="../Administering/xaconsiderations.html">Working with XA transactions</a></li><li><a href="../Administering/adscenarios.html">Scenarios</a></li></ul></li><li><a href="../Administering/vm00001_.html">Using VMware vSphere to handle Eclipse Amlen failover</a></li></ul></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Tuning messaging performance for the <span class="ph">Eclipse Amlen</span> resource adapter
in <span class="ph">WebSphere Application
Server</span></h1>






<div class="body taskbody"><p class="shortdesc">To help optimize messaging performance, you can tune the <span class="ph">Eclipse Amlen</span> resource adapter
properties that control the performance of message-driven beans and
other messaging applications.</p>
<section class="section context"><p class="p">You can optimize the performance of messaging by tuning
specific <span class="ph">Eclipse Amlen</span> resource
adapter parameters. You can set these parameters by using the <span class="ph">WebSphereÂ® Application
Server</span> administrative
console or by using the wsadmin tool.</p><p class="p">For information about
tuning the performance of <span class="ph">WebSphere Application
Server</span>, see the tuning
sections in <a class="xref" href="http://www.redbooks.ibm.com/abstracts/SG248056.html?Open" target="_blank" rel="external noopener">WebSphere Application
Server V8.5 Administration and Configuration Guide for the Full Profile</a>.</p><p class="p">Complete
the following steps to optimize the messaging performance for the <span class="ph">Eclipse Amlen</span> resource adapter
in <span class="ph">WebSphere Application
Server</span> by using
the <span class="ph">WebSphere Application
Server</span> administrative
console:</p></section>
<section><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Monitor MDB thread pool size for the <span class="ph">Eclipse Amlen</span> resource adapter.</span>
<div class="itemgroup stepresult"><p class="p">If an insufficient number of threads are available
for your message-driven beans, a performance bottleneck can be created.
There is a compromise between providing enough threads to maximize
the throughput of messages and configuring too many threads. Configuring
too many threads can lead to CPU starvation of the threads in the
application server. If you notice that the throughput of messages
falls after you increase the size of the default thread pool, then
decrease the size of the thread pool and reassess the message throughput.</p><ol class="ol" type="a">
<li class="li">View or modify the number of threads in your default thread pool
for a <span class="ph">WebSphere Application
Server</span>. <p class="p">By
default, message-driven beans use the default thread pool. The best
performance is obtained by setting the <span class="ph uicontrol">Maximum size</span> value
to the expected maximum concurrency for all message-driven beans.&nbsp;</p><ol class="ol" type="i">
<li class="li">Click&nbsp;<span class="ph menucascade"><span class="ph uicontrol">Servers</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Server
Types</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">WebSphere application servers</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"><var class="keyword varname">server_name</var></span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">[Additional
Properties] Thread Pools</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Default</span></span>.</li>
<li class="li">Optional. Change the <span class="ph uicontrol">Maximum size</span> value,
then click&nbsp;<span class="ph uicontrol">OK</span>.</li>
</ol><p class="p"></p></li>
<li class="li">Optional.&nbsp;Create your own thread pool.&nbsp;<p class="p">The default thread pool
is used by a number of &nbsp;<span class="ph">WebSphere Application
Server</span>&nbsp;components, so
you might want to define a separate thread pool for the message-driven
beans. Creating your own thread pool reduces contention for the default
thread pool. </p><ol class="ol" type="i">
<li class="li">Click&nbsp;<span class="ph menucascade"><span class="ph uicontrol">Servers</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Server
Types</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">WebSphere application servers</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"><var class="keyword varname">server_name</var></span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">[Additional
Properties] Thread Pools</span></span>.</li>
<li class="li">Create a thread pool.</li>
<li class="li">Create enough threads to support the maximum amount of concurrent
work for your message-driven beans.</li>
<li class="li">Change the <span class="ph">Eclipse Amlen</span> resource
adapter to use your new thread pool by completing the following steps:<ol class="ol">
<li class="li">Click <span class="ph menucascade"><span class="ph uicontrol">Resources</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Resource
Adapters</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"> Resource adapters</span></span>.</li>
<li class="li">Select the&nbsp;<span class="ph">Eclipse Amlen</span> resource
adapter&nbsp;with the appropriate scope. The scope of your resource adapter
depends upon the scope of your connection factories.</li>
<li class="li">Replace the name in the&nbsp;<span class="ph uicontrol">Thread pool alias</span>&nbsp;box
with your new thread pool name.</li>
<li class="li">Click&nbsp;<span class="ph uicontrol">Apply</span>.</li>
</ol></li>
</ol></li>
<li class="li">Save your changes to the master configuration.</li>
</ol></div></li><li class="li step stepexpand"><span class="ph cmd">Tune MDB performance with the <span class="ph">Eclipse Amlen</span> resource adapter.</span>
<ol type="a" class="ol substeps">
<li class="li substep substepexpand"><span class="ph cmd">Click <span class="ph menucascade"><span class="ph uicontrol">Resources</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Resource Adapters</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"> Resource adapters</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">J2C activation specifications</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"><var class="keyword varname">activation_specification_name</var></span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">J2C activation specification custom properties</span></span>.</span></li>
<li class="li substep substepexpand"><span class="ph cmd">Change the <span class="keyword parmname">clientMessageCache</span> setting
for the activation specification. </span><div class="itemgroup stepxmp"><p class="p">The default value
of <code class="ph codeph">-1</code> sets the message cache size to <code class="ph codeph">1000</code> for
unshared topic subscriptions and to <code class="ph codeph">0</code> for all other
cases.  Delivering a larger number of messages to each MDB endpoint
can improve performance.  However, in the cases of queues with multiple
consumers, and shared topic subscriptions, keep the default value
of <code class="ph codeph">-1</code> if messages must be distributed evenly across
consumers.</p></div></li>
<li class="li substep substepexpand"><span class="ph cmd">Change the <span class="keyword parmname">concurrentConsumers</span> setting
for the activation specification.</span><div class="itemgroup stepxmp"><p class="p">The <span class="keyword parmname">concurrentConsumers</span> property
controls the amount of concurrent work that can be processed by a
message bean. Increasing the number of concurrent consumers can improve
performance but can also increase the number of threads that are in
use at one time. To benefit from increasing the value of this property,
you must have enough threads available in the MDB thread pool to support
the concurrent work. However, if message order must be retained across
failed deliveries, keep the default value of <code class="ph codeph">1</code>.</p></div>
</li>
<li class="li substep substepexpand"><span class="ph cmd">Save your changes to the master configuration.</span>
</li>
</ol>
</li><li class="li step stepexpand"><span class="ph cmd">Change the maximum connections in a connection factory
for the <span class="ph">Eclipse Amlen</span> resource
adapter.</span><div class="itemgroup info"><p class="p">The maximum connections parameter limits the
number of local connections. The default is <code class="ph codeph">10</code>. You
might need to set this parameter to be as large as the number of threads
(enterprise beans) that are concurrently sending messages. </p></div>
<ol type="a" class="ol substeps">
<li class="li substep"><span class="ph cmd">Click <span class="ph menucascade"><span class="ph uicontrol">Resources</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Resource Adapters</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"> Resource adapters</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">J2C connection factories</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol"><var class="keyword varname">factory_name</var></span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Connection pool properties</span></span>.</span>
</li>
<li class="li substep"><span class="ph cmd">Enter the required value in the&nbsp;<span class="ph uicontrol">Maximum connections</span>&nbsp;field.</span>
</li>
<li class="li substep"><span class="ph cmd">Click&nbsp;<span class="ph uicontrol">Apply</span>.</span></li>
<li class="li substep"><span class="ph cmd">Save your changes to the master configuration.</span>
</li>
</ol>
</li></ol></section>
</div>

<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../Administering/configuringra.html" title="To configure the Eclipse Amlen resource adapter for WebSphere Application Server, you must define a number of JCA resources.">Configuring Eclipse Amlen resource adapter for WebSphere Application Server</a></div></div></nav></article></main></body></html>