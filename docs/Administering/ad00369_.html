<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content="System administrators can create and update endpoints by using REST Administration APIs."><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../doc.css"><title>Creating and updating an endpoint by using REST Administration APIs</title></head><body id="pdf_ad00369_"><nav role="toc"><ul><li><a href="../welcome.html">Welcome</a></li><li><a href="../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../Overview/ov00000_.html">Product overview</a></li><li><a href="../Planning/pl00001_.html">Planning</a></li><li><a href="../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../Administering/ad00000_.html">Administering</a><ul><li><a href="../Administering/ad00390_.html">Configuring the administration endpoint</a></li><li><a href="../Administering/ad00200_.html">Server administration</a></li><li><a href="../Administering/ad00370_.html">Configuring LDAP for user authentication</a></li><li><a href="../Administering/ad00700_.html">Configuring security</a></li><li><a href="../Administering/dv00010.html">Configuring protocol plug-ins</a></li><li><a href="../Administering/ad00360_.html">Configuring message hubs</a><ul><li><a href="../Administering/ad00361_.html">Configuring message hubs by using the Amlen WebUI</a></li><li><a href="../Administering/ad00322_.html">Configuring message hubs by using REST Administration APIs</a><ul><li><a href="../Administering/ad00323_.html">Creating and updating a message hub by using REST Administration APIs</a><ul><li><a href="../Administering/ad00327_.html">Creating and updating a connection policy by using REST Administration APIs</a></li><li><a href="../Administering/ad00450_.html">Creating and updating a messaging policy type by using REST Administration APIs</a></li><li class="active"><a href="../Administering/ad00369_.html">Creating and updating an endpoint by using REST Administration APIs</a></li></ul></li></ul></li></ul></li><li><a href="../Administering/ad00350_.html">Configuring message queues</a></li><li><a href="../Administering/ad00940_.html">Configuring the cluster membership of an Eclipse Amlen server</a></li><li><a href="../Administering/ad00850_.html">Configuring disconnected client notifications</a></li><li><a href="../Administering/ad02940_.html">Configuring administrative subscriptions </a></li><li><a href="../Administering/ad00111.html">Deleting a ClientSet by using a REST Administration API</a></li><li><a href="../Administering/ad00510_.html">Configuring SNMP</a></li><li><a href="../Administering/ad01326_.html">Configuring certificate revocation lists</a></li><li><a href="../Administering/ad00460_.html">Viewing and deleting configuration objects by using REST Administration APIs</a></li><li><a href="../Administering/ad00929.html">Managing multiple Eclipse Amlen servers from a single Amlen WebUI</a></li><li><a href="../Administering/ad00100_.html">Working with external resources</a></li><li><a href="../Administering/ad00920.html">HTTP status codes</a></li></ul></li><li><a href="../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../Security/se00000_.html">Security</a></li><li><a href="../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../Reference/re00000_.html">Reference</a></li><li><a href="../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Creating and updating an endpoint by using <span class="ph">REST Administration APIs</span></h1>
  
  <div class="body taskbody"><p class="shortdesc">System administrators can create and update endpoints by using <span class="ph">REST Administration APIs</span>.</p>
    <section class="section prereq">
      <div class="p">Ensure that the following message hub creation tasks are complete:<ol class="ol">
          <li class="li"><a class="xref" href="ad00323_.html" title="System administrators can create and update endpoints, connection policies, messaging policy types, and message hubs by using REST Administration APIs.">Create a message hub</a>.</li>
          <li class="li"><a class="xref" href="ad00327_.html" title="System administrators can create and update connection policies by using REST Administration APIs.">Create connection policies</a>.</li>
          <li class="li"><a class="xref" href="ad00450_.html" title="You can use the Eclipse Amlen REST API POST method to create or update one or more types of messaging policy object. There are three types of messaging policy; topic policy, subscription policy and queue policy. If the type of messaging policy that is specified in the request does not exist in the Eclipse Amlen configuration, then the policy is created. Otherwise, the existing policy configuration is updated.">Create messaging policy type</a>. There are three types
            of messaging policy - topic policy, queue policy, and subscription policy.</li>
        </ol></div>
      
    </section>
    <section class="section context"><p class="p">You can create an endpoint or update an existing by using a <span class="ph">REST Administration API</span>, or by using the <span class="ph">Amlen WebUI</span>. For more information about using the <span class="ph">Amlen WebUI</span> to create an endpoint, see <a class="xref" href="ad00361_.html" title="System administrators and messaging administrators can configure message hubs by using the Message Hubs page in the Amlen WebUI.">Configuring message hubs by using the Amlen WebUI</a>.</p>For more information about the components you must specify to create an endpoint, including naming restrictions, see <a class="xref" href="ad00360_.html" title="You can configure messaging hubs either by using the Amlen WebUI or by using REST Administration APIs.">Configuring message hubs</a>.</section>
    <section><ol class="ol steps"><li class="li step stepexpand">
        <span class="ph cmd">To create or update an endpoint, use the <span class="ph">Eclipse Amlen</span> REST API POST method with the following <span class="ph">Eclipse Amlen</span> configuration URI:</span>
        <div class="itemgroup info">
          <p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration/</code></p>
        </div>
      </li><li class="li step stepexpand">
        <span class="ph cmd">Provide Endpoint object configuration data in the payload of the POST method by using the following schema. <span class="keyword parmname">Content-type</span> is set to <kbd class="ph userinput">application/json</kbd>.  Ensure that capitalization and double quotation marks are used as shown. </span>
        <div class="itemgroup info"><pre class="pre codeblock"><code>
{    
   "Endpoint": {
     "&lt;NameOfEndpoint&gt;": {
       "Description": "string",
       "Port": integer,
       "Interface": "string",
       "Protocol": "string",
       "ConnectionPolicies": "string",
       "TopicPolicies": "string",
       "QueuePolicies": "string",
       "SubscriptionPolicies":  "string", 
       "MaxMessageSize": "string",
       "MessageHub": "string",
       "SecurityProfile": "string",
       "Enabled": true|false,
       "MaxSendSize": integer,
       "BatchMessages": true|false,
       "EnableAbout": true|false
     }
   }
}</code></pre>Where:<div class="p">
            <dl class="dl">
              
                <dt class="dt dlterm"><var class="keyword varname">NameOfEndpoint</var></dt>
                <dd class="dd">Required.</dd>
                <dd class="dd ddexpand">Specifies the name of the endpoint.</dd>
                <dd class="dd ddexpand">The name must not have leading or trailing spaces and cannot contain control
                  characters, commas, double quotation marks, backslashes, or equal signs. The first
                  character must not be a number or any of the following special characters:
                      <p class="p"><code class="ph codeph">! # $ % &amp; ' ( ) * + - . / : ; &lt; &gt; ? @</code></p>
                </dd>
                <dd class="dd ddexpand">The maximum length of the name is 256 characters. </dd>
                <dd class="dd ddexpand">After the topic policy is created, you cannot change this name.</dd>
              
              
                <dt class="dt dlterm">Description</dt>
                <dd class="dd">Optional.</dd>
                <dd class="dd ddexpand">Specifies a description for the endpoint.</dd>
                <dd class="dd ddexpand">If you do not want a description, omit
                    <code class="ph codeph">"Description":"<em class="ph i">description</em>"</code>.</dd>
              
              
                <dt class="dt dlterm">Port</dt>
                <dd class="dd">Required if you are creating an endpoint.</dd>
                <dd class="dd ddexpand">Specifies the port that clients connect to.</dd>
                <dd class="dd ddexpand">The port number must be in the range 1 - 32767, 61001 - 65535.</dd>
              
              
                <dt class="dt dlterm">Interface</dt>
                <dd class="dd">Required if you are creating an endpoint.</dd>
                <dd class="dd ddexpand">Specifies one, or all, of the available <span class="ph">Eclipse Amlen</span> IP addresses for the client to
                  connect to.</dd>
                <dd class="dd ddexpand">You can use the value <code class="ph codeph">all</code> to specify all available IP
                  addresses.</dd>
                <dd class="dd ddexpand">If you are using Amazon Elastic Cloud Compute (Amazon EC2), ensure that the
                  address that you specify for the endpoint is an Amazon EC2 private IP address that
                  is associated with an Amazon EC2 public elastic IP address. </dd>
              
              
                <dt class="dt dlterm">Protocol</dt>
                <dd class="dd">Required if you are creating an endpoint.</dd>
                <dd class="dd ddexpand">Specifies the protocols that the clients can use to connect to the
                  endpoint.</dd>
                <dd class="dd ddexpand">You can choose from JMS and MQTT protocols. If there are any protocol plug-ins
                  installed on the <span class="ph">Eclipse Amlen</span> server, you
                  can specify these as well. </dd>
                <dd class="dd ddexpand">To specify more than one value, separate each value with a comma.</dd>
                <dd class="dd ddexpand">To select all protocols, specify All.</dd>
              
              
                <dt class="dt dlterm">ConnectionPolicies</dt>
                <dd class="dd">Required if you are creating an endpoint.</dd>
                <dd class="dd ddexpand">Specifies the connection policies to apply to this endpoint. The policies must
                  exist. These policies must be specified in a comma-separated list.</dd>
                <dd class="dd ddexpand">When <span class="ph">Eclipse Amlen</span> checks whether a
                  client is authorized to connect, each connection policy is checked in the order
                  that the policies are specified on the endpoint. The policies are checked until
                  either authorization is granted, or all connection policies on the endpoint are
                  checked. Therefore, the order of the comma-separated list is important.</dd>
              
            </dl>
          </div><dl class="dl">
            
              <dt class="dt dlterm">MaxMessageSize</dt>
              <dd class="dd">Optional.</dd>
              <dd class="dd ddexpand">Specifies the maximum size, in bytes, KB or MB, that a message can be when sent to <span class="ph">Eclipse Amlen</span> through this endpoint.</dd>
              <dd class="dd ddexpand">The value must be in the range 1 KB - 262144 KB.</dd>
              <dd class="dd ddexpand">The value can include a KB or MB suffix. If no suffix is used, the value is in bytes, in which case the range is 1024 - 268435456.</dd>
              <dd class="dd ddexpand">The default value is 1024 KB.</dd>
            
            
              <dt class="dt dlterm">MessageHub</dt>
              <dd class="dd">Required if you are creating an endpoint.</dd>
              <dd class="dd ddexpand">Specifies the message hub that the endpoint belongs to. The message hub must
                exist.</dd>
            
            
              <dt class="dt dlterm">SecurityProfile</dt>
              <dd class="dd">Optional.</dd>
              <dd class="dd ddexpand">Specifies the security profile to be applied to the endpoint. The security profile
                must exist. </dd>
              <dd class="dd ddexpand">If you do not want to specify a security profile, omit
                    <code class="ph codeph">"SecurityProfile":"<var class="keyword varname">secProfile</var>"</code>.</dd>
              <dd class="dd ddexpand">To remove the current value of security profile, set
                  <span class="keyword parmname">SecurityProfile</span> to <kbd class="ph userinput">""</kbd> in the REST API
                POST payload.  </dd>
            
            
              <dt class="dt dlterm">Enabled: true|false</dt>
              <dd class="dd">Required if you are creating an endpoint.</dd>
              <dd class="dd ddexpand">Specifies whether the endpoint is enabled (true) or disabled (false).</dd>
            
            
              <dt class="dt dlterm">MaxSendSize</dt>
              <dd class="dd">Optional.</dd>
              <dd class="dd ddexpand">Specifies the maximum size, in bytes, that part of a message can be when it is
                sent.</dd>
              <dd class="dd ddexpand">The value must be in the range 128 - 65536.</dd>
              <dd class="dd ddexpand">You might want to use this option in environments where resource-constrained
                devices are used; set a low value for <span class="keyword parmname">MaxSendSize</span>, for example
                256 bytes, and disable the batching of messages by setting
                  <span class="keyword parmname">BatchMessages</span> to false.</dd>
              <dd class="dd ddexpand">The default value is 16384 bytes.</dd>
            
            
              <dt class="dt dlterm">BatchMessages: true|false</dt>
              <dd class="dd">Optional.</dd>
              <dd class="dd ddexpand">Specifies whether messages can be sent in batches (true) or must be sent singly
                (false). If <span class="keyword parmname">BatchMessages</span> is false and the size of the message
                is less than the value specified for <span class="keyword parmname">MaxSendSize</span>, the message
                is sent singly. If the size of the message is greater than the value specified for
                  <span class="keyword parmname">MaxSendSize</span>, the message is sent in multiple fragments; if
                  <span class="keyword parmname">BatchMessages</span> is false, fragments of different messages
                cannot be sent in a single send operation.</dd>
              <dd class="dd ddexpand">You might want to set <span class="keyword parmname">BatchMessages</span> to false in environments
                where resource-constrained devices are used to ensure that single messages are sent;
                ensure that you also set a low value for <span class="keyword parmname">MaxSendSize</span>, for
                example 256 bytes.</dd>
              <dd class="dd ddexpand">The default value is true.</dd>
            
          
            <dt class="dt dlterm">EnableAbout: true|false</dt>
            <dd class="dd">Optional.</dd>
            <dd class="dd ddexpand">Specifies whether the About <span class="ph">Eclipse Amlen</span> panel for this endpoint can be reached.</dd>
            <dd class="dd ddexpand">The default value is false which means that the panel for this endpoint cannot be reached. </dd>
            <dd class="dd ddexpand">In production environments, it is best practice to specify a value of false.</dd>
          
          </dl><p class="p">You must specify at least one of the following three messaging policy types:</p><div class="p">
            <dl class="dl">
              
                <dt class="dt dlterm">TopicPolicies</dt>
                <dd class="dd">Specifies the topic policies to apply to this endpoint. The policies must exist.
                  These policies must be specified in a comma-separated list.</dd>
                <dd class="dd ddexpand">When <span class="ph">Eclipse Amlen</span> checks whether a client is authorized to perform topic messaging actions, each topic policy is checked in the order that the policies are specified on the endpoint. The policies are checked until either authorization is granted, or all topic policies on the endpoint are checked. Therefore, the order of the comma-separated list is important.</dd>
              
              
                <dt class="dt dlterm">SubscriptionPolicies</dt>
                <dd class="dd">Specifies the subscription policies to apply to this endpoint. The policies must
                  exist. These policies must be specified in a comma-separated list.</dd>
                <dd class="dd ddexpand">When <span class="ph">Eclipse Amlen</span> checks whether a client is authorized to perform subscription messaging actions, each subscription policy is checked in the order that the policies are specified on the endpoint. The policies are checked until either authorization is granted, or all subscription policies on the endpoint are checked. Therefore, the order of the comma-separated list is important.</dd>
              <dd class="dd ddexpand">If you are using MQTT global-shared subscriptions, you must also specify a topic policy.</dd>
              
              
                <dt class="dt dlterm">QueuePolicies</dt>
                <dd class="dd">Specifies the queue policies to apply to this endpoint. The policies must exist.
                  These policies must be specified in a comma-separated list.</dd>
                <dd class="dd ddexpand">When <span class="ph">Eclipse Amlen</span> checks whether a client is authorized to perform queue messaging actions, each queue policy is checked in the order that the policies are specified on the endpoint. The policies are checked until either authorization is granted, or all queue policies on the endpoint are checked. Therefore, the order of the comma-separated list is important.</dd>
              
            </dl>
          </div></div>
      </li></ol></section>
    <section class="example">
      <p class="p">The following example shows a POST method to create an endpoint called "MyEndpoint" by
        using cURL: </p>
      <pre class="pre codeblock"><code>
curl -X POST  \
   -H 'Content-Type: application/json'  \
   -d  '{   
            "Endpoint":  { 
               "MyEndpoint": {
                 "Port": 16102,            
                 "Enabled": false,
                 "Protocol": "All",            
                 "Interface": "All",           
                 "ConnectionPolicies": "MyConnectionPolicy",   
                 "TopicPolicies": "MyTopicPolicy", 
                 "MaxMessageSize": "4096KB",
                 "MessageHub": "MyHub",            
                 "Description": "Unsecured endpoint for demonstration use only."
            }
        }
    }
  '  \
http://127.0.0.1:9089/ima/v1/configuration/</code></pre>
      <p class="p">The following example shows an example response to the POST method:</p>
      <pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre>
    </section>
  </div>
</article></main></body></html>