<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="../../commonltr.css"><link rel="stylesheet" type="text/css" href="../../doc.css"><title>Create or update an LDAP server connection</title></head><body id="cmd_create_update_ldap"><nav role="toc"><ul><li><a href="../../welcome.html">Welcome</a></li><li><a href="../../Overview/ov00000_.html">Eclipse Amlen</a><ul><li><a href="../../Overview/ov00000_.html">Product overview</a></li><li><a href="../../Planning/pl00001_.html">Planning</a></li><li><a href="../../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../../Administering/ad00000_.html">Administering</a></li><li><a href="../../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../../Security/se00000_.html">Security</a></li><li><a href="../../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../../Reference/re00000_.html">Reference</a><ul><li><a href="../../Reference/intro.html">REST API Reference</a><ul><li><a href="../../Reference/cmd_delete_config.html">Delete configuration objects</a></li><li><a href="../../Reference/cmd_show_config.html">Show configuration details of nameable configuration objects</a></li><li><a href="../../Reference/cmd_show_config_fix.html">Show configuration details of fixed-name configuration objects</a></li><li><a href="../../Reference/cmd_REST_file_put.html">Copy a file from the local machine to Eclipse Amlen  </a></li><li><a href="../../Reference/AdminEndpointCmd/adminendpoint.html">Admin endpoint REST Administration APIs</a></li><li><a href="../../Reference/ApplianceCmd/appliancesettingcommands.html">Server REST Administration APIs</a></li><li><a href="../../Reference/ClusterCmd/clustercommands.html">Cluster REST Administration APIs</a></li><li><a href="../../Reference/SecurityCmd/securitycommands.html">Security REST Administration APIs</a><ul><li><a href="../../Reference/SecurityCmd/cmd_imaserver_close_connection.html">Close a client connection</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_cprofile.html">Create or update a certificate profile</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_clientcert.html">Create or update a client certificate</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_ltpa.html">Create or update an LTPA profile</a></li><li class="active"><a href="../../Reference/SecurityCmd/cmd_create_update_LDAP.html">Create or update an LDAP server connection</a></li><li><a href="../../Reference/SecurityCmd/cmd_imaserver_show_LDAP.html">Show configuration details of an LDAP object</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_oauth.html">Create or update an OAuth profile</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_sprofile.html">Create or update a security profile</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_tcert.html">Create or update a trusted certificate</a></li><li><a href="../../Reference/SecurityCmd/cmd_apply_psk.html">Upload a pre-shared key file</a></li><li><a href="../../Reference/SecurityCmd/cmd_create_update_psk.html">Apply a pre-shared key file</a></li><li><a href="../../Reference/SecurityCmd/cmd_view_psk.html">Show a pre-shared key file configuration</a></li><li><a href="../../Reference/SecurityCmd/cmd_delete_psk.html">Removing the configuration of a pre-shared key </a></li><li><a href="../../Reference/SecurityCmd/cmd_enable_disable_FIPS.html">Enable and disable FIPS</a></li></ul></li><li><a href="../../Reference/MsgHubCmd/messagehubcommands.html">Message hub REST Administration APIs</a></li><li><a href="../../Reference/QueueCmd/QueueCmd.html">Queue REST Administration APIs</a></li><li><a href="../../Reference/MQConnCmd/mqconnectivitycommands.html">MQ Connectivity  REST Administration APIs</a></li><li><a href="../../Reference/HACmd/HAcommands.html">High availability REST Administration APIs</a></li><li><a href="../../Reference/BackupCmd/backupandrestorecommands.html">Backup and restore commands</a></li><li><a href="../../Reference/MonitorCmd/monitoringandreportingcommands.html">REST Monitoring APIs</a></li><li><a href="../../Reference/XATranCmd/xatransactioncommands.html">XA transaction REST Administration APIs</a></li><li><a href="../../Reference/SNMPCmd/snmpcommands.html">SNMP REST Administration APIs</a></li><li><a href="../../Reference/ProtocolPluginCmd/ProtocolPluginCmd.html">Protocol plug-in REST Administration APIs</a></li><li><a href="../../Reference/SpecialCmd/spepcom.html">Special purpose REST Administration APIs</a></li></ul></li><li><a href="../../Reference/_Topics/sy10530_.html">Digital certificates</a></li><li><a href="../../Reference/_Topics/re00003_.html">Supported cipher lists</a></li><li><a href="../../Reference/_Topics/re00001_.html">Classless Inter-Domain Routing</a></li></ul></li><li><a href="../../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Create or update an LDAP server connection</h1>







<div class="body refbody"><p class="shortdesc"></p>
<section class="section"><h2 class="title sectiontitle">Purpose</h2>Creates or updates an external LDAP server connection.</section>
<section class="section"><h2 class="title sectiontitle">URI</h2>

<p class="p">Use the <span class="ph">Eclipse Amlen</span> REST API POST method
        with the following <span class="ph">Eclipse Amlen</span> configuration
        URI:</p>
<p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration/</code></p>
</section>
<section class="section"><h2 class="title sectiontitle">Object configuration data</h2><p class="p">Provide LDAP object configuration data in the payload of the POST method by using the following schema. <span class="keyword parmname">Content-type</span> is set to <kbd class="ph userinput">application/json</kbd>: </p><pre class="pre codeblock"><code>
{    
  "LDAP": {
    "URL": "string",
    "Certificate": "string",
    "IgnoreCase": true|false,
    "BaseDN": "string",
    "BindDN": "string",
    "BindPassword":  "string",
    "UserSuffix": "string",
    "GroupSuffix": "string",
    "GroupCacheTimeout": integer,
    "UserIdMap": "string",
    "GroupIdMap": "string",
    "GroupMemberIdMap": "string",
    "Timeout": integer,
    "EnableCache": true|false,
    "CacheTimeout": integer,
    "MaxConnections": integer,
    "NestedGroupSearch": true|false,
    "Enabled": true|false,
    "Verify": true|false,
    "Overwrite": true|false 
   }
}</code></pre>Where:<dl class="dl">
      
        <dt class="dt dlterm">URL</dt>
        <dd class="dd">Required if you are creating an LDAP connection.</dd>
        <dd class="dd ddexpand">Specifies the URL of the LDAP server.</dd>
        <dd class="dd ddexpand">The URL must be of the form:<code class="ph codeph"> ldap://<var class="keyword varname">ipAddress</var>:<var class="keyword varname">portNumber</var></code> or <code class="ph codeph">ldaps://<var class="keyword varname">ipAddress</var>:<var class="keyword varname">portNumber</var></code> </dd>
        <dd class="dd ddexpand">If you use <code class="ph codeph">ldaps://</code>, you must upload an LDAP certificate before you create the LDAP connection.</dd>
      
      
        <dt class="dt dlterm">Certificate</dt>
        <dd class="dd">Specifies the certificate to use if the LDAP URL uses SSL or TLS. This is the name of a certificate in the truststore.</dd>
      
      
        <dt class="dt dlterm">IgnoreCase: true|false</dt>
        <dd class="dd">Specifies whether case is ignored (true) or not ignored (false).</dd>
        <dd class="dd ddexpand">The default value is true.</dd>
      
      
        <dt class="dt dlterm">BaseDN</dt>
        <dd class="dd">Required if you are creating an LDAP connection.</dd>
        <dd class="dd ddexpand">Specifies the base distinguished name of the directory service.</dd>
      
      
        <dt class="dt dlterm">BindDN</dt>
        <dd class="dd">Specifies the distinguished name to use when you bind to LDAP.</dd>
      
      
        <dt class="dt dlterm">BindPassword</dt>
        <dd class="dd">Specifies the password to use when you bind to LDAP.</dd>
        <dd class="dd ddexpand">The value of this parameter is not returned on the REST API GET method.</dd>
      
      
        <dt class="dt dlterm">UserSuffix</dt>
        <dd class="dd">Specifies the distinguished name that is the suffix of the user distinguished name.</dd>
      
      
        <dt class="dt dlterm">GroupSuffix</dt>
        <dd class="dd">Specifies distinguished name that is the suffix of the group distinguished name.</dd>
      
      
        <dt class="dt dlterm">GroupCacheTimeout</dt>
        <dd class="dd">Specifies the group cache time to live, in seconds.</dd>
        <dd class="dd ddexpand">This value must be in the range 1-86400.</dd>
        <dd class="dd ddexpand">The default value is 300.</dd>
      
      
        <dt class="dt dlterm">UserIdMap</dt>
        <dd class="dd">Specifies the LDAP filter that maps the short name of a user to an LDAP entry.</dd>
      
      
        <dt class="dt dlterm">GroupIdMap</dt>
        <dd class="dd">Specifies the LDAP filter that maps the short name of a group to an LDAP entry.</dd>
      
      
        <dt class="dt dlterm">GroupMemberIdMap</dt>
        <dd class="dd">Specifies LDAP filter that identifies user-to-group relationships.</dd>
      
      
        <dt class="dt dlterm">Timeout</dt>
        <dd class="dd">Specifies the timeout for LDAP calls, in seconds.</dd>
        <dd class="dd ddexpand">This value must be in the range 1-60.</dd>
        <dd class="dd ddexpand">The default value is 10.</dd>
      
      
        <dt class="dt dlterm">EnableCache: true|false</dt>
        <dd class="dd">Specifies whether the authentication result is cached (true) or not cached (false).</dd>
        <dd class="dd ddexpand">The default value is true.</dd>
      
      
        <dt class="dt dlterm">CacheTimeout</dt>
        <dd class="dd">Specifies the cache time to live, in seconds.</dd>
        <dd class="dd ddexpand">This value must be in the range 1-60.</dd>
        <dd class="dd ddexpand">The default value is 10.</dd>
      
      
        <dt class="dt dlterm">MaxConnections</dt>
        <dd class="dd">Specifies the maximum number of concurrent connections that can be made to the LDAP server.</dd>
        <dd class="dd ddexpand">This value must be in the range 1-100.</dd>
        <dd class="dd ddexpand">The default value is 10.</dd>
      
      
        <dt class="dt dlterm">NestedGroupSearch</dt>
        <dd class="dd">Specifies whether to use nested group searching (true) to find the group membership of a user.</dd>
        <dd class="dd ddexpand">The default value is false which means that nested group searching is not used.</dd>
      
      
        <dt class="dt dlterm">Enabled: true|false</dt>
        <dd class="dd">Specifies whether the external LDAP connection is enabled (true) or disabled (false).</dd>
        <dd class="dd ddexpand">The default value is true.</dd>
      
      
        <dt class="dt dlterm">Verify: true|false</dt>
        <dd class="dd">Specifies whether the LDAP connection is tested with the configuration change without committing the configuration change. </dd>
        <dd class="dd ddexpand">The default value is false which means that the configuration change is committed without first testing the LDAP connection.</dd>
      
      
        <dt class="dt dlterm">Overwrite: true|false</dt>
        <dd class="dd">Specifies whether an existing certificate is overwritten.</dd>
        <dd class="dd ddexpand">The default value is false which means that an existing certificate is not overwritten.</dd>
      
      </dl></section>
    <section class="section"><h2 class="title sectiontitle">Usage NotesÂ®</h2>
      
      <ul class="ul">
        <li class="li">You must copy the LDAP certificate to <span class="ph">Eclipse Amlen</span> before you can apply it to <span class="ph">Eclipse Amlen</span>. <a class="xref" href="../cmd_REST_file_put.html">Copy a file from the local machine to Eclipse Amlen</a> to copy the certificate.</li>
        <li class="li">You can copy and apply only one LDAP certificate. If you want to upload and apply another certificate, you must overwrite the existing certificate.</li>
        <li class="li">The certificate must be a pem format certificate.</li>
        <li class="li">After the certificate is applied, it is automatically renamed to <code class="ph codeph">ldap.pem</code></li>
        <li class="li">If you update the LDAP certificate, the old LDAP certificate is used until the next time a client or connection is authenticated or authorized.</li>
        <li class="li">If you are updating an LDAP certificate in a High Availability (HA)
          environment, you must upload the new certificate on the primary server and then replicate
          this certificate on the standby server. For more information about how to update
          certificates in an HA environment, see <a class="xref" href="../../Administering/ad00379_.html">Updating a certificate for an LDAP
            connection in a High Availability environment by using REST Administration
          APIs</a>.</li>
        <li class="li">If you use <code class="ph codeph">ldaps://</code>, you might need to add a DNS entry to resolve the host name of the LDAP server.</li>
        
        <li class="li">The new LDAP settings will be used the next time a client or connection is authenticated or authorized.</li>
        <li class="li">Ensure that capitalization and double quotation marks are used as shown.</li>
      </ul>
    </section>
    <section class="section"><h2 class="title sectiontitle">Related <span class="ph">REST Administration APIs</span></h2>
      
      <ul class="ul">
        <li class="li"><a class="xref" href="../cmd_REST_file_put.html">Copy a file from the local machine to Eclipse Amlen</a></li>
        <li class="li"><a class="xref" href="cmd_imaserver_show_LDAP.html">Show configuration details of an LDAP object</a></li>
      </ul>
    </section>
    <section class="section"><h2 class="title sectiontitle">Example</h2>Creates an LDAP server connection by using
        cURL:<pre class="pre codeblock"><code>
curl -X POST \
   -H 'Content-Type: application/json'  \
   -d  '{ 
         "LDAP": {
           "URL": "ldap://192.0.2.0:1000",
           "BaseDN": "ou=DEPT,o=COMPANY,c=COUNTRY",
           "BindDN": "cn=root",
           "BindPassword": "password",
           "UserSuffix": "ou=users,ou=DEPT,o=COMPANY,c=COUNTRY",
           "GroupSuffix": "ou=groups,ou=DEPT,o=COMPANY,c=COUNTRY",         
           "UserIdMap": "*:UID",
           "GroupIdMap": "*:cn",
           "GroupMemberIdMap": "member",
           "Enabled": true
         }
       }
 '  \
http://127.0.0.1:9089/ima/v1/configuration/</code></pre><div class="p">An
        example response to the POST
        method:<pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre></div></section>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../Reference/SecurityCmd/securitycommands.html" title="The security REST Administration APIs allow you to configure security on Eclipse Amlen. You can import keys and certificates to secure connections to the system, and enable or disable FIPS-compliant security.">Security REST Administration APIs</a></div></div></nav></article></main></body></html>