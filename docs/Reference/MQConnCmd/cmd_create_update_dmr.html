<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="generator" content="DITA-OT"><meta name="keywords" content="DestinationMappingRule"><link rel="stylesheet" type="text/css" href="../../commonltr.css"><link rel="stylesheet" type="text/css" href="../../doc.css"><title>Create or update a destination mapping rule</title></head><body id="cmd_create_update_dmr"><nav role="toc"><ul><li><a href="../../welcome.html">Welcome</a></li><li><a href="../../eclipse_amlen.html">Eclipse Amlen</a><ul><li><a href="../../Overview/ov00000_.html">Product overview</a></li><li><a href="../../Planning/pl00001_.html">Planning</a></li><li><a href="../../QuickStartGuide/qsg10000.html">Installing Eclipse Amlen  </a></li><li><a href="../../Upgrading/up00001_.html">Upgrading</a></li><li><a href="../../Scenarios/sc00000_.html">End-to-end scenarios</a></li><li><a href="../../Administering/ad00000_.html">Administering</a></li><li><a href="../../AdministeringWebUI/ad00002_.html">Administering the Web UI</a></li><li><a href="../../Bridge/br00010.html">Configuring the Bridge</a></li><li><a href="../../Security/se00000_.html">Security</a></li><li><a href="../../Monitoring/admin00008_.html">Monitoring and reporting</a></li><li><a href="../../Backup/ba00000_.html">Backup and restore</a></li><li><a href="../../Troubleshooting/tr10000_.html">Troubleshooting</a></li><li><a href="../../Developing/develop_guide.html">Developing client applications</a></li><li><a href="../../Reference/re00000_.html">Reference</a><ul><li><a href="../../Reference/intro.html">REST API Reference</a><ul><li><a href="../../Reference/cmd_delete_config.html">Delete configuration objects</a></li><li><a href="../../Reference/cmd_show_config.html">Show configuration details of nameable configuration objects</a></li><li><a href="../../Reference/cmd_show_config_fix.html">Show configuration details of fixed-name configuration objects</a></li><li><a href="../../Reference/cmd_REST_file_put.html">Copy a file from the local machine to Eclipse Amlen  </a></li><li><a href="../../Reference/AdminEndpointCmd/adminendpoint.html">Admin endpoint REST Administration APIs</a></li><li><a href="../../Reference/ApplianceCmd/appliancesettingcommands.html">Server REST Administration APIs</a></li><li><a href="../../Reference/ClusterCmd/clustercommands.html">Cluster REST Administration APIs</a></li><li><a href="../../Reference/SecurityCmd/securitycommands.html">Security REST Administration APIs</a></li><li><a href="../../Reference/MsgHubCmd/messagehubcommands.html">Message hub REST Administration APIs</a></li><li><a href="../../Reference/QueueCmd/QueueCmd.html">Queue REST Administration APIs</a></li><li><a href="../../Reference/MQConnCmd/mqconnectivitycommands.html">MQ Connectivity  REST Administration APIs</a><ul><li class="active"><a href="../../Reference/MQConnCmd/cmd_create_update_dmr.html">Create or update a destination mapping rule</a></li><li><a href="../../Reference/MQConnCmd/cmd_create_update_qmc.html">Create or update a queue manager connection</a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_apply_cert_MQConn.html">Create or update an MQ SSL Certificate</a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_show_dmr.html">Show configuration details of a destination mapping rule</a></li><li><a href="../../Reference/MQConnCmd/cmd_show_mqsslcert.html">Show configuration details of an MQ SSL certificate</a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_show_qmc.html">Show configuration details of a queue manager connection</a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_enable_mqconn.html">Enable MQ connectivity </a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_disable_mqconn.html">Disable MQ connectivity </a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_start_mqconn.html">Start MQ connectivity </a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_restart_mqconn.html">Restart MQ connectivity </a></li><li><a href="../../Reference/MQConnCmd/cmd_imaserver_stop_mqconn.html">Stop MQ connectivity</a></li><li><a href="../../Reference/MQConnCmd/cmd_status_mqconnectivity.html">Show MQConnectivity status</a></li></ul></li><li><a href="../../Reference/HACmd/HAcommands.html">High availability REST Administration APIs</a></li><li><a href="../../Reference/BackupCmd/backupandrestorecommands.html">Backup and restore commands</a></li><li><a href="../../Reference/MonitorCmd/monitoringandreportingcommands.html">REST Monitoring APIs</a></li><li><a href="../../Reference/XATranCmd/xatransactioncommands.html">XA transaction REST Administration APIs</a></li><li><a href="../../Reference/SNMPCmd/snmpcommands.html">SNMP REST Administration APIs</a></li><li><a href="../../Reference/ProtocolPluginCmd/ProtocolPluginCmd.html">Protocol plug-in REST Administration APIs</a></li><li><a href="../../Reference/SpecialCmd/spepcom.html">Special purpose REST Administration APIs</a></li></ul></li><li><a href="../../Reference/_Topics/sy10530_.html">Digital certificates</a></li><li><a href="../../Reference/_Topics/re00003_.html">Supported cipher lists</a></li><li><a href="../../Reference/_Topics/re00001_.html">Classless Inter-Domain Routing</a></li></ul></li><li><a href="../../glossary/glossary.html">Glossary</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Create or update a destination mapping rule</h1>



<div class="body refbody">
<section class="section"><h2 class="title sectiontitle">Purpose</h2>Creates or updates a destination mapping rule. A destination mapping
rule maps an <span class="ph">Eclipse Amlen</span> topic or queue to a <span class="ph">IBM® MQ</span> topic or queue.</section>
<section class="section"><h2 class="title sectiontitle">URI</h2>

<p class="p">Use the <span class="ph">Eclipse Amlen</span> REST API POST method with the
following <span class="ph">Eclipse Amlen</span> configuration URI:</p>
<p class="p"><code class="ph codeph">http://&lt;admin-endpoint-IP:Port&gt;/ima/v1/configuration/</code></p>
</section>
<section class="section"><h2 class="title sectiontitle">Object configuration data</h2>

<p class="p">Provide DestinationMappingRule object configuration data in the payload of the POST method by
using the following schema. <span class="keyword parmname">Content-type</span> is set to
<kbd class="ph userinput">application/json</kbd>: </p>
<pre class="pre codeblock"><code>
{    
  "DestinationMappingRule": {
    "&lt;NameOfDestinationMappingRule&gt;": {
      "QueueManagerConnection": "string",
      "Enabled": true|false,
      "RuleType": integer,
      "Source": "string",
      "Destination": "string",
      "MaxMessages": integer,

      "RetainedMessages": All|None           
     }
   }
}</code></pre>
<p class="p">Where</p>
<dl class="dl">

<dt class="dt dlterm"><var class="keyword varname">NameOfDestinationMappingRule</var></dt>
<dd class="dd">Required.</dd>
<dd class="dd ddexpand">Specifies a name for the destination mapping rule. After the destination mapping rule is
created, you cannot change this name.</dd>
<dd class="dd ddexpand">The name must not have leading or trailing spaces and cannot contain control characters, commas,
double quotation marks, backslashes, or equals signs. The first character must not be a number or
any of the following special characters: </dd>
<dd class="dd ddexpand"><code class="ph codeph">! # $ % &amp; ' ( ) * + - . / : ; &lt; &gt; ? @</code></dd>


<dt class="dt dlterm">QueueManagerConnection</dt>
<dd class="dd">Specifies the name of one or more queue manager connections. The queue manager connections
identify which queue managers the rule maps to. You can specify more than one queue manager
connection by using a comma-separated list.</dd>
<dd class="dd ddexpand">To preserve the order of the messages, you must use only one queue manager connection for each
destination mapping rule. </dd>
<dd class="dd ddexpand">If you create multiple destination mapping rules with the same destination, but which use
different queue manager connections, the message order is not preserved.</dd>
<dd class="dd ddexpand">To edit a queue manager connection, all destination mapping rules that use that queue manager
connection must be disabled. You do not need to restart the mqconnectivity process for any changes
that you make to take effect.</dd>


<dt class="dt dlterm">Enabled: true|false</dt>
<dd class="dd">Specifies whether the destination mapping rule is enabled (true) or disabled (false).</dd>
<dd class="dd ddexpand">The default value is true.</dd>
<dd class="dd ddexpand">To edit a destination mapping rule, the rule must first be disabled. Once all changes are
complete, the rule must be enabled for any changes to take effect. </dd>


<dt class="dt dlterm">RuleType</dt>
<dd class="dd">Specifies the rule type that you want to use.</dd>
<dd class="dd ddexpand">The rule type can be any of the values that are detailed in the table in the topic <a class="xref" href="../../Administering/ad00110_.html#ad00110_" title="To send messages between Eclipse Amlen and IBM MQ, you must create destination mapping rules. Destination mapping rules are created by associating an Eclipse Amlen topic or queue with a IBM MQ topic or queue. You can create a maximum of 64 destination mapping rules.">Configuring destination mapping rules</a>.</dd>


<dt class="dt dlterm">Source</dt>
<dd class="dd">Specifies the source topic string or queue for the rule.</dd>
<dd class="dd ddexpand">The source that is specified must follow the naming rules for the source type.</dd>
<dd class="dd ddexpand">For <span class="ph">IBM MQ</span> queues, the value can contain
characters in the ranges a-z, A-Z, and 0-9, and any of the following characters:<code class="ph codeph">% . /
_</code></dd>
<dd class="dd ddexpand">For <span class="ph">Eclipse Amlen</span>, the value must not have leading or
trailing spaces and cannot contain control characters, commas, double quotation marks, backslashes
or equal signs. The first character must not be a number, quotation mark, or any of the following
special characters: <code class="ph codeph">! # $ % &amp; ( ) * + , - . / : ; &lt; = &gt; ? @"</code></dd>


<dt class="dt dlterm">Destination</dt>
<dd class="dd">Specifies the destination topic string or queue for the rule.</dd>
<dd class="dd ddexpand">The destination that is specified must follow the naming rules for the destination type.</dd>
<dd class="dd ddexpand">For <span class="ph">IBM MQ</span> queues, the value can contain
characters in the ranges a-z, A-Z, and 0-9, and any of the following characters:<code class="ph codeph">% . /
_</code></dd>
<dd class="dd ddexpand">For <span class="ph">Eclipse Amlen</span>, the value must not have leading or
trailing spaces and cannot contain control characters, commas, double quotation marks, backslashes
or equal signs. The first character must not be a number, quotation mark, or any of the following
special characters: <code class="ph codeph">! # $ % &amp; ( ) * + , - . / : ; &lt; = &gt; ? @"</code></dd>


<dt class="dt dlterm">MaxMessages</dt>
<dd class="dd">Specifies the maximum number of messages that can be buffered for the destination mapping
rule.</dd>
<dd class="dd ddexpand">This option is valid only for destination mapping rules from <span class="ph">Eclipse Amlen</span> topics to <span class="ph">IBM MQ</span>. That is, rule types 1, 2, 5, 6, and 7.</dd>
<dd class="dd ddexpand">The value must be in the range 1-20000000.</dd>
<dd class="dd ddexpand">The default value is 5000. </dd>


<dt class="dt dlterm">RetainedMessages: All|None</dt>
<dd class="dd">Optional.</dd>
<dd class="dd ddexpand">Specifies which messages are forwarded as to a topic as retained messages.</dd>
<dd class="dd ddexpand">This parameter overrides the retained message setting of the original message publisher.</dd>
<dd class="dd ddexpand">This option is only valid for destination mapping rules that forward messages to a topic or
topic subtree.</dd>
<dd class="dd ddexpand">This value can be one of the following values:<ul class="ul">
<li class="li">
<dl class="dl">

<dt class="dt dlterm">All</dt>
<dd class="dd">All messages are forwarded to the topic as retained messages.</dd>

</dl>
</li>
<li class="li">
<dl class="dl">

<dt class="dt dlterm">None</dt>
<dd class="dd">No messages are forwarded to the topic as retained messages.</dd>

</dl>
</li>
</ul>The default value is None.</dd>

</dl>
</section>
<section class="section"><h2 class="title sectiontitle">Usage Notes®</h2>

<ul class="ul">
<li class="li">You must disable a destination mapping rule before you can make any changes to that rule. After
you have edited the rule, you must enable that destination mapping rule in order for the changes to
take effect. </li>
<li class="li">To edit a queue manager connection, all destination mapping rules that use that queue manager
connection must be disabled. You do not need to restart the mqconn process in order for any changes
to take effect.</li>
</ul>
</section>
<section class="section"><h2 class="title sectiontitle">Related <span class="ph">REST Administration APIs</span></h2>

<ul class="ul">
<li class="li"><a class="xref" href="cmd_create_update_qmc.html">Create or update a queue manager connection</a></li>
</ul>
</section>
<section class="section"><h2 class="title sectiontitle">Example</h2>Creates a destination mapping rule called
<code class="ph codeph">exampleRule</code> by using
cURL::<pre class="pre codeblock"><code>
curl -X POST \
   -H 'Content-Type: application/json'  \
   -d  '{     
         "DestinationMappingRule": {
           "exampleRule": {
            "QueueManagerConnection": "MyQMC",
            "RuleType": 1,
            "Source": "ISMRoot/Level1",
            "Destination": "Queue1",
            "MaxMessages": 7000,
            "Enabled": true,
            "RetainedMessages": All          
          }
        } 
      }
 '  \
http://127.0.0.1:9089/ima/v1/configuration/</code></pre><div class="p">An
example response to the POST
method:<pre class="pre codeblock"><code>
{        
  "Version": "v1",
  "Code": "CWLNA6011",
  "Message": "The requested configuration change has completed successfully."
}
</code></pre></div></section>
</div>

<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../Reference/MQConnCmd/mqconnectivitycommands.html" title="The MQ Connectivity REST Administration APIs allow you to configure MQ Connectivity. You can create, edit, view, and delete destination mapping rules and queue manager connections. You can enable and disable MQ Connectivity. You can start, restart and stop the MQ Connectivity process.">MQ Connectivity REST Administration APIs</a></div></div></nav></article></main></body></html>